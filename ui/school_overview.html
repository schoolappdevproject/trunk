<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0056) -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="keywords" content="HTML5 Template"><meta name="description" content="Listingpro - Template HTML5"><meta name="author">
	
	<!-- Title -->
	<title>
	School Guru
</title>
	
	<!-- Mobile Meta -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	

    
    
	<!-- CSS -->
<!--
    <script type="text/javascript" src="ui-jquery/jquery.js"></script>
    <script type="text/javascript" src="ui-jquery/jquery-ui.js"></script>
    <script type="text/javascript" src="./school_overview_files/jquery-lib.js"></script>
    <script type="text/javascript" charset="UTF-8" src="js/angular.min.js"></script>
    <script type="text/javascript" charset="UTF-8" src="css/bootstrap-3.3.7/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="node_modules/jquery-bar-rating/dist/jquery.barrating.min.js"></script>
    <script type="text/javascript" charset="UTF-8" src="js/cookie.js"></script>
    <script type="text/javascript" charset="UTF-8" src="js/util.js"></script>
    <script type="text/javascript" src="./school_overview_files/jquery-migrate-1.3.0.min.js"></script>
    <script type="text/javascript" src="./school_overview_files/mapbox.js"></script> 
    <script type="text/javascript" src="./school_overview_files/leaflet.markercluster.js"></script>
    <script type="text/javascript" src="./school_overview_files/build.min.js"></script>
    <script type="text/javascript" src="./school_overview_files/chosen.jquery.js"></script>
    <script type="text/javascript" src="./school_overview_files/slick.min.js"></script>
    <script type="text/javascript" src="./school_overview_files/jquery.mmenu.min.all.js"></script>
    <script type="text/javascript" src="./school_overview_files/jquery.magnific-popup.min.js"></script>
    <script type="text/javascript" src="./school_overview_files/jquery.filer.min.js"></script>
    <script type="text/javascript" src="./school_overview_files/bootstrap-rating.js"></script>
    <script type="text/javascript" src="./school_overview_files/classie.js"></script>  
    <script type="text/javascript" src="./school_overview_files/modalEffects.js"></script> 
    <script type="text/javascript" src="./school_overview_files/main.js"></script> 
    -->
    	<!-- Favicon -->
<!--	<link rel="shortcut icon" href="http://microsoftmsdn.com/schoolguru/images/favicon.png" type="image/x-icon">
    <link href="./school_overview_files/jquery-ui.css" rel="stylesheet" type="text/css">
    <link href="./school_overview_files/colors.css" type="text/css" rel="stylesheet">
    <link href="css/bootstrap-3.3.7/dist/fonts/glyphicons-halflings-regular.ttf" type="text/css" rel="stylesheet">
    
    <link href="./school_overview_files/jquery.filer-dragdropbox-theme.css" type="text/css" rel="stylesheet">
    <link href="./school_overview_files/component.css" type="text/css" rel="stylesheet">
    <link href="./school_overview_files/styles.min.css" type="text/css" rel="stylesheet">
    <link href="./school_overview_files/font-awesome.min.css" type="text/css" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="./school_overview_files/jquery.mmenu.all.css">
    <link href="./school_overview_files/mapbox.css" rel="stylesheet">
    <link href="./school_overview_files/chosen.css" rel="stylesheet">
    <link href="./school_overview_files/MarkerCluster.css" rel="stylesheet">
    <link href="./school_overview_files/MarkerCluster.Default.css" rel="stylesheet">
    <link href="./school_overview_files/main.css" type="text/css" rel="stylesheet">
    <link href="css/common.css" type="text/css" rel="stylesheet">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <link rel="stylesheet" href="node_modules/jquery-bar-rating/dist/themes/fontawesome-stars.css">
    <link href="css/bootstrap-3.3.7/dist/css/bootstrap.min.css" type="text/css" rel="stylesheet"> 
    -->
    
    <!-- Favicon -->
	<link rel="shortcut icon" href="http://microsoftmsdn.com/schoolguru/images/favicon.png" type="image/x-icon"><link href="./school_overview_files/jquery-ui.css" rel="stylesheet" type="text/css">
	<script type="text/javascript" src="./school_overview_files/jquery-lib.js"></script>
		
	<!-- CSS -->
    <link href="css/bootstrap-3.3.7/dist/css/bootstrap.css" type="text/css" rel="stylesheet">
	
    <link href="./school_overview_files/colors.css" type="text/css" rel="stylesheet">
    <link href="./school_overview_files/font.css" type="text/css" rel="stylesheet">
<!--    <link href="./school_overview_files/jquery.filer.css" type="text/css" rel="stylesheet"> -->
    <link href="./school_overview_files/jquery.filer-dragdropbox-theme.css" type="text/css" rel="stylesheet">
    <link href="./school_overview_files/component.css" type="text/css" rel="stylesheet">
    <link href="./school_overview_files/styles.min.css" type="text/css" rel="stylesheet">
    <link href="./school_overview_files/font-awesome.min.css" type="text/css" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="./school_overview_files/jquery.mmenu.all.css">
    <link href="./school_overview_files/mapbox.css" rel="stylesheet">
    <link href="./school_overview_files/chosen.css" rel="stylesheet">
    <link href="./school_overview_files/MarkerCluster.css" rel="stylesheet">
    <link href="./school_overview_files/MarkerCluster.Default.css" rel="stylesheet">
    <link href="./school_overview_files/main.css" type="text/css" rel="stylesheet">
    
    <link href="css/bootstrap-3.3.7/dist/fonts/glyphicons-halflings-regular.ttf" type="text/css" rel="stylesheet">
    <link href="css/common.css" type="text/css" rel="stylesheet">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <link rel="stylesheet" href="node_modules/jquery-bar-rating/dist/themes/fontawesome-stars.css">
    

    <style>
    .user-text h3
    {
        margin-bottom:15px !important;
    }
    .page-container {
    padding-bottom: 10px;
    }
    </style>
      <script>
          $(function () {
              $("#tabs").tabs();
          });
     </script>
    
<style>
.ui-widget-header
{
    border-top:none;
}
.page-container-second {
    padding-top: 30px;
    padding-bottom: 60px
}
.ui-tabs .ui-tabs-nav li.ui-tabs-active a
{
    background:#41A6DF;
    color:#fff;
    margin-right:0px;
}
.ui-tabs .ui-tabs-panel
{
    background:#fbfbfb;
    padding:20px 0px 15px 0px;
}
.ui-tabs
{
    padding:0px;
    margin-top:30px;
    width:100%;
}
.ui-tabs .ui-tabs-nav
{
    padding:0px;
}
.ui-tabs .ui-tabs-nav .ui-tabs-anchor
{
    background:#EFF3F6;
    font-family:"quicksand-bold";
    color:#333;
    padding:15px 20px;
}
.ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default
{
    border-top:none;
}
p span
{
    padding-right:20px;
}
p span i
{
    padding-right:5px;
    color:#41A6DF;
}
</style>


    <script>
       var reviewPicArray = [];
        var fees_file_attach_data;
        var dtl_username ;
        var dtl_email;
        var dtl_user_id;
        var session_id;
        var profile_pic_data ;
        var school_latlng;
        var map;
        var marker;
        
        
        
        $(function(){
             if(window.google){
                    map = new google.maps.Map(document.getElementById("schoolmap"), {
                    center: {lat: -34.397, lng: 150.644},
                    zoom: 8,
                    mapTypeId: 'roadmap',
                    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU}
                  });
                  marker = new google.maps.Marker({ 
                        map: map, 
                        position: {lat: -34.397, lng: 150.644} 
                  });    
                }
        });
        
       
        
        
         function loadProfileImage(user_id_i)
        {
            // $user_id    = trim($_POST['user_id']);
                var formData = {
                        user_id     : user_id_i
                 };

                console.log(formData);

                  // process the formf
                $.ajax({
                    type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                    url         : '../api/load_data/load_prof_pic.php', // the url where we want to POST
                    data        : formData, // our data object
                    dataType    : 'json', // what type of data do we expect back from the server
                    encode          : true
                })
                    // using the done promise callback
                .done(function(data) {  
                    profile_pic_data =  data['image'];
                    document.getElementById("profile_pic_img").src = data['image'];
                    document.getElementById("fees_block_profile_image").src = data['image'];
                    
                    // here we will handle errors and validation messages
                }).fail(function( xhr, status, errorThrown ) {
                        console.log( "Query Failed" );
                        console.log( "Error: " + errorThrown );
                        console.log( "Status: " + status );
                        console.dir( xhr );
                        return false;
                }); 
        }
        
        if(typeof localStorage.getItem("sessionid") !== 'undefined')
                {
                    dtl_username = localStorage.getItem("username");
                    dtl_email    = localStorage.getItem("email");        
                    dtl_user_id  = localStorage.getItem("user_id");   
                    session_id   = localStorage.getItem("session_id");        
                    loadProfileImage(dtl_user_id);     
                    console.log("Fetching Profile pic .......");
                   
                }
        
    </script>
    
</head> 
    
<script>
   
   function checkFeesFileAttach(sender) {
    var validExts = new Array(".xlsx", ".xls", ".csv",".doc",".jpg",".pdf",".docx");
    var fileExt = sender.value;
    fileExt = fileExt.substring(fileExt.lastIndexOf('.'));
    if (validExts.indexOf(fileExt) < 0) {
      alert("Invalid file selected, valid files are of " +
               validExts.toString() + " types.");
      return false;
    }
    else return true;
}   
        
      // Attach a submit handler to the form
    $("#login_form").submit(function( event ) {
      // Stop form from submitting normally
        event.preventDefault();
        var $form = $( this );
        var username = $form.find( "input[id='username']" ).val();
        var password = $form.find( "input[id='password']" ).val();
             
        login_util(username,password); //util.js
    });
     
     function register()
     { 
        registration_util();
     }
    
 
    
     function searchExactSchoolID(school_id)
        {
            
              console.log("searchExact Search "+school_id);
              $.ajax({
                    type: "GET", 
                    url: "../api/search_api/search_id.php", 
                    data: {"school_id" :school_id},
                    success: function(response)
                    {
                      
                      
                        for (var i in response) 
                        {
                           
                            var principal_name              =   response[i].principal_name;
                             var school_id                  =   response[i].school_id;
                             var name 		                = 	response[i].school_name;
                             var address                	=   response[i].address;
                             var distance                   =   5;
                             var latlng = new google.maps.LatLng(
                                  parseFloat(response[i].latitude),
                                  parseFloat(response[i].longitude));
                            school_latlng = latlng;
                            var session_timmings 	       =   response[i].session_timmings;
                            var city 				       =   response[i].city;
                            var category 			       =   response[i].category;  
                            var school_type 		       =   response[i].school_type; 
                            var courses 			       =   response[i].courses;
                            var school_size 		       =   response[i].school_size;
                            var board 				       =   response[i].board;
                            var medium_of_teaching         =   response[i].medium_of_teaching;
                            var religous_preference        =   response[i].religous_preference;
                            var small_description 	       =   response[i].small_description;
                            var contact                    =   response[i].contact;
                            var email                      =   response[i].email;
                            var admission_description      =   response[i].admission_desciption;
                            var average_rating_score       =   response[i].average_rating_score;
                            var weblink                    =   response[i].web_link;                           
                            var country                    =   response[i].country;
                            var pin                        =   response[i].pin;
                            var profile_pic_data           =   response[i].profile_pic_data;
                            var mobility                   =   response[i].mobility;
                            var admission_method           =   response[i].admission_method;
                            
                            console.log("latitude and longitude" + latlng);
                    
                            if(window.google){
                                    map = new google.maps.Map(document.getElementById("schoolmap"), {
                                    center: latlng,
                                    zoom: 8,
                                    mapTypeId: 'roadmap',
                                    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU}
                                  });
                                  marker = new google.maps.Marker({ 
                                        map: map, 
                                        position: latlng 
                                  });    
                            }
                                
                            $("#dtl_principal")         .html(principal_name);
                            $("#dtl_address")           .html(address);
                            
                            $("#dtl_session_timing")    .html(getSessionTimingString        (parseInt(session_timmings)));
                            $("#dtl_category")          .html(getCategoryString             (parseInt(category)));
                            $("#dtl_adm_method")        .html(getAdmissionMethodString      (parseInt(admission_method)));
                            $("#dtl_courses")           .html(getCourseString               (parseInt(courses)));
                            $("#dtl_school_size")       .html(getSchoolSizeString           (parseInt(school_size)));
                            $("#dtl_board")             .html(getSchoolBoardString          (parseInt(board)));
                            $("#dtl_medium_of_teaching").html(getMediumOfTeachingString     (parseInt(medium_of_teaching)));
                            $("#dtl_relpref")           .html(getReligousPreferencesString  (parseInt(religous_preference)));
                            $("#dtl_mobility")          .html(mobility);
                            $("#dtl_phone")             .html(contact);
                            $("#dtl_weblink")           .html(weblink);
                            $("#link_web").attr('href',weblink);
                            
                            $("#dtl_email_cnt")         .html(email);
                            $("#link_email").attr('href',"mailto:"+email);
                            $("#dtl_city")              .html(city);
                            $('#dtl_adm_desc')          .html(admission_description);
                            $('#dtl_school_name')       .html(name);
                            $('#dtl_sml_desc')          .html(small_description);
                            console.log(small_description);
                            $("#school_profile_pic_data").attr("src",profile_pic_data);
                            
                            break;
                        }
                        
                  
                    },
                    dataType: "json"//set to JSON    
                })    

            
            
        }
    </script>
<body onload="load()">
    <nav class="attireMainNav"><button class="toggleBtn iconMenu" type="button">Toggle navigation</button><ul></ul></nav>
    <form method="post" action="" id="form1">
        
         <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
        
        
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTY1NDU2MTA1MmRk9iX5YMAe++FKKzr54wKuzrEKz54sktsOKNCNES0qsbc=">
</div>

<div class="aspNetHidden">

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="AA885A5D">
	<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEdAAq3DfxEFGPaMvfINDCifoqHGesOOO7wi3Uzz+yy2Y0Kc7t0vKVmDtQYb7KLGs2qWD2fVFyO0cCPrpER53fgJQ2ef9ouzpSgh9JAYfaBgOBF1jbdtU+KanXQVlOfZzrpxsmCX8Lp7Gxx4o3+jPo9Eis3pQXh6ctc7d6Z8yTyIGLWqxQdbSkcOCjNLf/0uiwACmyROqJZ6VjZHAo4OubqQY60d+RovYmqtCaAV07WZRjGJi+iGMrw6l0M+KP1pEv+9Qs=">
</div>
    <div>
    <div id="page">
    <header class="">
		<div class="lp-topbar">
			<div class="container">
				<div class="row">
					<div class="col-md-8 col-sm-8 text-left">
						<ul class="lp-topbar-menu">
							<li>
								<a href="#">Home</a>
							</li>
							<li>
								<a href="#">About</a>
							</li>
							<li>
								<a href="#">Contact</a>
							</li>
						</ul>
					</div>
					<div class="col-md-4 col-sm-4 text-right">
						<div class="lp-join-now">
							<span>
								<!-- Contacts icon by Icons8 -->
								<img class="icon icons8-Contacts" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAADNElEQVRoge2ZLWhbURTHn3iig8IiIiomIgqrqJiomJgIrCKiomKig4iKioiKioiJiEJExURFRGEbRERMVERkENhE5BgTGUxEVERkUBERURFR8Zu45+5durzk3feRm7H8IRB455z3u9/3nOd5a6317wjYAcrAOdAEroAqcAhsuOabK8AHKsBX5qsP7LrmnSlgE+gasCMZhRpwDJwCDeBGnk+Bt8COa/Y/AjaAn0YDDgA/xNYH3j8YoUaY/VIlPQvwHdiKYO8De0AdGItvcxms86AKwL38rOe9bAoTacyzLBijglQE4jpBjHOJ8TFNNluItkAcJ4ixKzGGKaJZQ/QEopgwDgApYcUC0NtpIWEc5w3R227shQrkVqEhn4ThdYIYTyXGrzTZbCH04fYmQYznEqOfJpstRFUg3qUQ4zJNNluIA4H4nCDGtcQop8lmC1ESiElM/7zcCgD20+azAdE33lpMfx+4kBjttPlsQAYCETu/AIoSo5cmmy1E4vmNylcgwX0tsVDpLMAQqMbwr4mv88XuAx0BuYnhr6/wXVwnV8Aj4IcAvbDweyk+37LksxKqUgJQt/Cpi89VlmxWMnaeCZCLYJ8zplVxCYjRRZCbdObNd1lXOiFzt+WGieC6ohuTn2GTMxoBsOeCda5Qta2pATkGTlAFioL8HxnPR66ZQ2WcCQPCpbNKdzn6IhFcAPOow7ItozBGnRUVYHulG0JQDZkusNvSdqxSydTzPA9VOdTTaWGCBLSMKeh+wcsoNI0pBXARwa9m2N9LjOVWGlHnwCuCO5aGaROUT4/m+O8bdq0HndAFjsjyGwqq6n5GUHgGdTpfAttiUzeeNVBnS15+JbHVqolPAVUInxjPxqhS6sJbgm0jysCt8aIB6pvH5gzbU+COcE2Bs5COqhDUynRH/WUbpwE+6oONVh84jOC3I6PTkd4dy/86EbJJ1Ce6vvHe1qxOs2mIXgd3wEnsQPHfXzZGt0ecnIUgBR0ia8CFUAfoUFjsslDgCcHiK2XEaMOj04QpNgVzgg84X7LDs5MxzaMvfuCDtVPGQu2GAC0bJ3OrXTXdRm1EbmEo93ocd2TXWut/1W9KptrZf/2YyAAAAABJRU5ErkJggg==" alt="join-now">
							</span>
							<div id="login_div"><a class=" md-trigger" data-modal="modal-3" id="a_login">Login </a></div>
                            <div id="account_div"><a class=" md-trigger" id="a_account"><span id="user_email"></span></a></div>    
						</div>
					</div>
				</div>
			</div>
		</div><!-- ../topbar -->
		
	<div class="md-modal md-effect-3" id="modal-3">
			<div class="login-form-popup lp-border-radius-8">
				<div class="siginincontainer">
					<h2 class="text-center" style="font-size:30px;">Sign in</h2>
					<form action="/" class="form-horizontal margin-top-30" id="login_form" method="post">
						<div class="form-group">
							<label for="username">Username or Email Address *</label>
							<input type="text" class="form-control" id="username">
						</div>
						<div class="form-group">
							<label for="password">Password *</label>
							<input type="password" class="form-control" id="password">
						</div>
						<div class="form-group">
							<div class="checkbox pad-bottom-10">
								<input id="check1" type="checkbox" name="price-on-call" value="price-on-call">
								<label for="check1">Keep me signed in</label>
							</div>
						</div>
						
						<div class="form-group">
							<input type="submit" value="Sign in" class="lp-secondary-btn width-full btn-first-hover"> 
						</div>
					</form>	
					<div class="pop-form-bottom">
						<div class="bottom-links">
							<a class="signUpClick">Not a member? Sign up</a>
							<a class="forgetPasswordClick pull-right">Forgot Password</a>
						</div>
						<p class="margin-top-15">Connect with your Social Network</p>
						<ul class="social-login list-style-none">
							<li><button id="logingoogle" class="google flaticon-googleplus"><i class="fa fa-google-plus"></i><span>Sign In</span></button></li>
							<li><button id="loginfacebook" class="facebook flaticon-facebook"><i class="fa fa-facebook"></i><span>Sign In</span></button></li>
							
						</ul>
					</div>
				<a class="md-close"><i class="fa fa-close"></i></a>
				</div>
				<div class="siginupcontainer">
					<h2 class="text-center" style="font-size:30px;">Sign Up</h2>
				<form class="form-horizontal margin-top-30" method="post">
						<div class="form-group">
							<label for="dtl_username">Username *</label>
							<input type="text" class="form-control" id="dtl_username">
						</div>
						<div class="form-group">
							<label for="dtl_email">Email Address *</label>
							<input type="email" class="form-control" id="dtl_email">
						</div>
						<div class="form-group">
							<label for="dtl_password">Password *</label>
                            <input type="password" class="form-control" id="dtl_password">
						</div>
						<div class="form-group">
							<input type="button" value="Register" class="lp-secondary-btn width-full btn-first-hover" onclick="register()"> 
						</div>
					</form>	
					<div class="pop-form-bottom">
						<div class="bottom-links">
							<a class="signInClick"> have an account? Sign in</a>
							<a class="forgetPasswordClick pull-right">Forgot Password</a>
						</div>
						<p class="margin-top-15">Connect with your Social Network</p>
						<ul class="social-login list-style-none">
							<li><button id="Button3" class="google flaticon-googleplus"><i class="fa fa-google-plus"></i><span>Sign Up</span></button></li>
							<li><button id="Button4" class="facebook flaticon-facebook"><i class="fa fa-facebook"></i><span>Sign Up</span></button></li>
							
						</ul>
					</div>
				<a class="md-close"><i class="fa fa-close"></i></a>
				</div>
				<div class="forgetpasswordcontainer">
                <h2 class="text-center" style="font-size:30px;">Forgot Password?</h2>
					<h1 class="text-center"></h1>
					<div class="form-horizontal margin-top-30" method="post">
						<div class="form-group">
						<input name="ctl00$TextBox5" type="text" id="TextBox5" placeholder="Enter Your Email Address" class="form-control" style="height:36px;">
						</div>
						<div class="form-group">
							<input type="submit" name="ctl00$Button5" value="Get New Password" id="Button5" class="lp-secondary-btn width-full btn-first-hover" style="padding:8px 30px;"> 
						</div>
					</div>	
					<div class="pop-form-bottom">
						<div class="bottom-links">
							<a class="cancelClick">Cancel</a>
						</div>
					</div>
				<a class="md-close"><i class="fa fa-close"></i></a>
				</div>
			</div>	
		</div>
		
		<!-- Popup Open -->
		<div class="md-modal md-effect-3" id="modal-2">
			<div class="container">
				<div class="md-content ">
					<div class="row popup-inner-left-padding ">
						<div class="col-md-6 lp-insert-data">
						</div>
						<div class="col-md-6">
							<div id="quickmap" class="quickmap"></div>
							<a class="md-close widget-map-click"><i class="fa fa-close"></i></a>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Popup Close -->
		<div class="md-overlay"></div> <!-- Overlay for Popup -->
							
		<div class="lp-menu-bar  lp-menu-bar-color">
			<div class="container">
					<div class="row">
						<div class="col-md-4 col-xs-6 lp-logo-container">
							<div class="lp-logo">
								<a href="http://microsoftmsdn.com/schoolguru/index.html">
									<img src="./school_overview_files/logo.png" alt="">
								</a>
							</div>
						</div>
						<div class="col-xs-6 mobile-nav-icon">
							<a href="#menu" class="nav-icon">
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</a>
						</div>
						<div class="col-md-8 col-xs-12 lp-menu-container">
							<div class="pull-right lp-add-listing-btn">
								<ul>
									<li><a href="#" style="line-height: 80px;"><i class="fa fa-plus"></i> Add Schools</a></li>
								</ul>
							</div>
							<div class="lp-menu pull-right menu">
								<ul>
									<li><a href="#" style="line-height: 80px;">Schools </a>
										
									</li>
									<li><a href="#" style="line-height: 80px;">Parents </a>
										
									</li>
                                    <li><a href="#" style="line-height: 80px;">Students </a>
										
									</li>
								
								</ul>
							</div>
						</div>
					</div>
				</div>
		</div>
		
	</header>
        
<div class="page-heading listing-page archive-page ">
			<div class="page-heading-inner-container text-center">
				<h1>School Overview</h1>
				
			</div>
			<div class="page-header-overlay"></div>
		</div>
        <section class="aliceblue">
		<div class="container page-container-second">
			
            <div class="row">
				<div class="col-md-12  padding-40 blog-single-inner-container lp-border lp-border-radius-8">
                <div class="row">
            <div class="col-md-3"><a href="#">
						<img id="school_profile_pic_data" src="" class="img-responsive">
					</a></div>
                    <div class="col-md-9"><h4 class="mt0"><span id="dtl_school_name"></span></h4></div>
                
            <div class="col-md-9">
                <span id="dtl_sml_desc"></span>         
            </div>
           <div class="col-md-9" style="">
                <h3> Ratings </h3>
                <select class="star-rating" id="school-rating" name="school_selector" disabled="true">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
             <h4 class="rate_desc" id="school_rating_desc">

             </h4>
            </div>
           
          
            </div>
                
					
					<div id="tabs" class="ui-tabs ui-widget ui-widget-content ui-corner-all">
  <ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" role="tablist">
    <li class="ui-state-default ui-corner-top ui-tabs-active ui-state-active" role="tab" tabindex="0" aria-controls="tabs-1" aria-labelledby="ui-id-1" aria-selected="true" aria-expanded="true"><a href="school_overview.html#tabs-1" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-1">Overview</a></li>
    <li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tabs-2" aria-labelledby="ui-id-2" aria-selected="false" aria-expanded="false"><a href="school_overview.html#tabs-2" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-2">Fees</a></li>
    <li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tabs-3" aria-labelledby="ui-id-3" aria-selected="false" aria-expanded="false"><a href="school_overview.html#tabs-3" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-3">Map</a></li>
    <li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tabs-4" aria-labelledby="ui-id-4" aria-selected="false" aria-expanded="false"><a href="school_overview.html#tabs-4" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-4">Review</a></li>
     <li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tabs-5" aria-labelledby="ui-id-5" aria-selected="false" aria-expanded="false"><a href="school_overview.html#tabs-5" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-5">Picture</a></li>
  </ul>
  <!-- Overview Tab-->
  <div id="tabs-1" aria-labelledby="ui-id-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom" role="tabpanel" aria-hidden="false">
  <div class="row">
    <style>
        /* Description style */
        .dtl_hd
        {
            font-family: sans-serif;
            font-style: normal;
            font-size: 0.9em;
            font-weight: bold;
            color: chocolate;
            padding-left: 20px;
        }
        
        .dtl_value
        {
            font-family: sans-serif;
            font-style: normal;
            font-size: 0.9em;
            font-weight:normal;
            padding-left: 25px;
            color:black;
        }
        
        .dtl_col
        {
            padding-left: 12px;
            padding-top: 12px;
        }
    </style>  

<div class="col-sm-12"> <!-- Description -->
    <div class="row"> <!-- Phone , address, session Timing -->
                <div class="col-sm-3 dtl_col">
                    <span class="dtl_hd">Principal Name</span><br>
                    <span id="dtl_principal" class="dtl_value"></span>
                </div>
                <div class="col-sm-3 dtl_col">
                    <span class="dtl_hd">Address</span><br>
                    <span id="dtl_address" class="dtl_value"></span>
                </div>
                <div class="col-sm-3 dtl_col">
                    <span class="dtl_hd">Session Timing</span><br>
                    <span id="dtl_session_timing" class="dtl_value"></span>
                </div>
        
                <div class="col-sm-3 dtl_col">
                    <span class="dtl_hd">Category</span><br>
                    <span id="dtl_category" class="dtl_value"></span>
                </div>
    </div>
    
    <div class="row"> <!-- category ,school type ,course -->
                
                <div class="col-sm-3 dtl_col">
                    <span class="dtl_hd">Admission Method</span><br>
                    <span id="dtl_adm_method" class="dtl_value"></span>
                </div>
                <div class="col-sm-3 dtl_col">
                    <span class="dtl_hd">Courses</span><br>
                    <span id="dtl_courses" class="dtl_value"></span>
                </div>
        
                <div class="col-sm-3 dtl_col">
                    <span class="dtl_hd">School Size</span><br>
                    <span id="dtl_school_size" class="dtl_value"></span>
                </div>
        
                <div class="col-sm-3 dtl_col">
                    <span class="dtl_hd">Board</span><br>
                    <span id="dtl_board" class="dtl_value"></span>
                </div>
    </div>
    
    <div class="row"> <!-- school size , board ,medium of teaching -->
                
                <div class="col-sm-3 dtl_col">
                    <span class="dtl_hd">Medium Of Teaching</span><br>
                    <span id="dtl_medium_of_teaching" class="dtl_value"></span>
                </div>
                <div class="col-sm-3 dtl_col">
                    <span class="dtl_hd">Mobility</span><br>
                    <span id="dtl_mobility" class="dtl_value"></span>
                </div>
                <div class="col-sm-3 dtl_col">
                    <span class="dtl_hd">Religous Preference</span><br>
                    <span id="dtl_relpref" class="dtl_value"></span>
                </div>
                <div class="col-sm-3 dtl_col">
                     <span class="dtl_hd">Phone Number</span><br>
                    <span id="dtl_phone" class="dtl_value"></span>
                </div>
    </div>
    
      <div class="row"> <!-- school size , board ,medium of teaching -->
                
                <div class="col-sm-3 dtl_col">
                    <span class="dtl_hd">WebLink</span><br>
                    <a href="" id="link_web" target="_blank"><span id="dtl_weblink" class="dtl_value"></span></a>
                </div>
                <div class="col-sm-3 dtl_col">
                    <span class="dtl_hd">Email</span><br>
                    <a href="" id="link_email"><span id="dtl_email_cnt" class="dtl_value"></span></a>
                </div>
                <div class="col-sm-3 dtl_col">
                    <span class="dtl_hd">City</span><br>
                    <span id="dtl_city" class="dtl_value"></span>
                </div>
                
    </div>
  
</div>

      
      <!-- Description Ends -->
    <!-- review Bloack -->
     <div class="col-sm-12">
          <div class="col-sm-2">
         </div>
         <div class="col-sm-8">
        <div class="review_block">
        <div class="row">
            <div class="col-sm-12">   
            <h4> Write a Review </h4> 
            </div>
            <div class="clearfix"></div>
         </div> 
        <div id ="init_review_form">
        <div class="row">
             <div class="col-sm-12">
                 <div class="col-sm-8">
                    <input type="text" id="dtl_review_initiate_txt" placeholder="Add review for the school" onclick="initiateReviewForm(); return false;" class="form-control" />

                    </div>
                    <div class="col-sm-4">

                     <input type="button" id="btn_initiate_review" value="Publish Review" class="lp-search-btn" style="float:left;padding:8px 15px;"/>
                    </div>
            </div>
        </div>
        </div>
        <div id="full_review_form">
            <div class="row">
            <div class="col-sm-12">
            <div class="col-sm-4"> 
      
                <div class="image_block">    
                    <img class="img-circle" id="profile_pic_img" src="" style="height: 180px; width:150px ;"/>
                </div>
                
            </div>
            <div class="col-sm-8">
                
                    <div class="row">
                      <input type="text" id="dtl_review_title" placeholder="Add Title" class="inner_txt" />  
                    </div> 
                    <div class="row">
                        <textarea name="review_txt" id="dtl_review_txt" placeholder="Enter Text ..." class="inner_txtarea"></textarea>
                    </div> 
                    <div class="row">
                        <h5>Add Image</h5>
                         <input id="review_image-upload" type="file" accept="image/*" hidden="true" value="add image" class="lp-search-btn" style="float:left;padding:8px 15px;"/>
                    </div> 
                    <div class="row">
                        <div id ="review_pic_block"></div>
                    </div>
                    <div class="row">
                        <br>
                    <div class="fb-share-button" data-href="https://developers.facebook.com/docs/plugins/" data-layout="button_count" data-size="small" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fplugins%2F&amp;src=sdkpreparse">Share</a></div>

                    </div>
                    <div class="row">
                        <br>
                         <input type="button" id="btn_publish_review" value="Publish Review" onclick="saveReview(); return false;" class="lp-search-btn" style="float:left;padding:8px 15px;"/>

                    </div>
                </div>
            </div>
            </div>
            <div id="row">
                <div class="col-sm-11"></div>
                <div class="col-sm-1"><a href="#" onclick="clearReview() ; return false;" >cancel</a></div>
            </div>
        </div>
            
              
        </div>
             </div>
         <div class="col-sm-2">
         </div>
        
    </div>
      
    <!-- review Bloack ends -->
      
    <!-- admission details -->
    <!-- admission details -->

    <div class="col-sm-12">
        <div class="col-sm-11">
            <h4>Reviews</h4>
            <div id="review_display">
                
             
        </div>

        </div>
    </div>
    </div>
  </div>
  <!-- Fees Tab -->
  <div id="tabs-2" aria-labelledby="ui-id-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom" role="tabpanel" aria-hidden="true" style="display: none;">
    
    <div class="row">
        <div class="col-sm-12">
        <div class="col-md-6">
            <!-- Fees Tabs -->
        </div> 
        <div class="col-md-2">
            <input type="button" id="btn_initiate_fees" value="Add Fees Detail" class="lp-search-btn" onclick="feesFormInit()" style="float:left;padding:8px 15px;"/>
        </div>
 
        </div> <div class="clearfix"></div> <br>

        <div> 
      <div class="col-sm-8">
         <div id="full_fees_form">
            <div class="row">
            <div class="col-sm-12">
            <div class="col-sm-4"> 
      
                <div class="image_block">    
                    <img class="img-circle" id="fees_block_profile_image" src="" style="height: 150px; width: 80%;"/>
                </div>
                
            </div>
            <div class="col-sm-8">
 
                    <div class="row">
                        <div class="col-sm-6" style="text-align:center;margin-top:20px; margin-left:20px">
                        <b>Class</b>
                        </div>
                        <div class="col-sm-2" style="text-align:right;">
                        <select id="dtl_Fees_class">  
                            <option value="Nur">Nursury</option>
                            <option value="1">1st </option>
                            <option value="2">2nd </option>
                            <option value="3">3rd </option>
                            <option value="4">4th </option>
                            <option value="5">5th </option>
                            <option value="6">6th </option>
                            <option value="7">7th </option>
                            <option value="8">8th </option>
                            <option value="9">9th </option>
                            <option value="10">10th </option>
                            <option value="11">11th </option>
                            <option value="12">12th </option>
                        </select>
                        </div>
                    </div> 
                    <div class="row">
                        <textarea name="review_txt" id="dtl_fees_txt" placeholder="Enter Fees Details  ..." class="inner_txtarea"></textarea>
                    </div> 
                    <div class="row">
                        <h5>Attach File</h5>
                         <input id="fees_file_upload" type="file" hidden="true" value="Upload File" class="lp-search-btn" style="float:left;padding:8px 15px;"/>
                    </div> 
                    <div class="row">
                        <img id="fees_thumbnail_pic" height="100px" width="80px" />
                    </div>
                    <div class="row">
                        <br>
                    <div class="fb-share-button" data-href="https://developers.facebook.com/docs/plugins/" data-layout="button_count" data-size="small" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fplugins%2F&amp;src=sdkpreparse">Share</a></div>

                    </div>
                    <div class="row">
                        <br>
                         <input type="button" id="btn_publish_review" value="Publish Fees" onclick="saveFeesUpdate(); return false;" class="lp-search-btn" style="float:left;padding:8px 15px;"/>

                    </div>
                </div>
            </div>
            </div>
            <div id="row">
                <div class="col-sm-11"></div>
                <div class="col-sm-1"><a href="#" onclick="clearFeesUpdate() ; return false;" >cancel</a></div>
            </div>
        </div>
	<!-- Fees Display  -->
	 </div>
             </div>
         <div class="col-sm-4">
         </div>
    </div>


<div class="col-sm-12">
        <div class="col-sm-11">
            <h4>Fees Details</h4>
            <div id="fees_display">
                
             
       	     </div>

        </div>
 </div>
      </div>  
  
  <!-- Map Tab -->
  <div id="tabs-3" aria-labelledby="ui-id-3" class="ui-tabs-panel ui-widget-content ui-corner-bottom" role="tabpanel" aria-hidden="true" style="display: none;">
  <div class="row">
   <div class="col-md-12">
      <!-- Google Map Scripts-->

      <div id="schoolmap"  style="width:100%;height:400px"></div>
    
      </div>  
        
  </div>
  </div>
                        
  <!-- Rating Tab -->
  <div id="tabs-4" style="padding: 20px; display: none;" aria-labelledby="ui-id-4" class="ui-tabs-panel ui-widget-content ui-corner-bottom" role="tabpanel" aria-hidden="true">
   <div class="row">

        <div class="col-md-12">
        <h4>School Ratings </h4>
            <!--  School_ratings --> 
        <iframe src="rating.html" width="97%" height="2024px" style="margin-left:15px;" frameborder="0" allowfullscreen=""></iframe>
        </div>
   
  </div>
   </div>                     
  <!-- gallery tab -->
  <div id="tabs-5" style="padding: 20px; display: none;" aria-labelledby="ui-id-5" class="ui-tabs-panel ui-widget-content ui-corner-bottom" role="tabpanel" aria-hidden="true">
  
    
        <div class="row">
        <div class="col-md-12">
        <h4>School Ratings </h4>
        <center>
            <!--  School_ratings --> 
        <iframe id="gallery_iframe" src="picture_gallery/gallery.html" width="97%" height="2024px" style="margin-left:15px;" frameborder="0" allowfullscreen=""></iframe>
            </center>
        </div>
   
        </div>
    
  </div>

					
	</div>				
				</div>

			</div>
            
		</div>

	</section>
    


        <footer class="text-center">
		<div class="footer-upper-bar">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<ul class="footer-menu">
							<li><a href="http://microsoftmsdn.com/schoolguru/index.html">Home</a></li>
							<li><a href="#">Blog</a></li>
							<li><a href="#">Contact</a></li>
							<li><a href="#">Join Us</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div><!-- ../footer-upper-bar -->
		<div class="footer-bottom-bar">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<ul class="footer-about-company">
							<li>Copyright © 2016 Schoolguru</li>
							<li>schoolguru@example.com</li>
							<li>Tel: +91 1234567891</li>
						</ul>
						<p class="credit-links"> Designed &amp; Developed by<a href="http://www.nextwebi.com/" target="_blank"> Nextwebi</a></p><a href="http://www.nextwebi.com/" target="_blank">
						</a><ul class="social-icons footer-social-icons"><a href="http://www.nextwebi.com/" target="_blank">
							</a><li><a href="http://www.nextwebi.com/" target="_blank"></a><a href="#">
								<img class="icon icons8-Facebook" src="./school_overview_files/facebook.png" alt="facebook"></a></li>
							<li><a href="#">
								<img class="icon icons8-Google-Plus" src="./school_overview_files/google-plus.png" alt="google-plus"></a></li>
							<li><a href="#">
								<img class="icon icons8-LinkedIn" src="./school_overview_files/linkidin.png" alt="linkedin"></a></li>
							
							<li><a href="#">
								<img class="icon icons8-Tumblr" src="./school_overview_files/twitter.png" alt="twitter"></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</footer>
	<a href="#" class="add-listing-mobile lp-search-btn">Add listing</a>
    </div>
        	<!-- Jquery Library -->
		

		<script type="text/javascript" src="./school_overview_files/jquery-migrate-1.3.0.min.js"></script> 
	
		<script type="text/javascript" src="./school_overview_files/mapbox.js"></script>
		<script type="text/javascript" src="./school_overview_files/leaflet.markercluster.js"></script>
	<!--	<script type="text/javascript" src="./school_overview_files/build.min.js"></script> -->
		<script type="text/javascript" src="./school_overview_files/chosen.jquery.js"></script>
		<script type="text/javascript" src="./school_overview_files/jquery-ui.js"></script>
		<script type="text/javascript" src="./school_overview_files/slick.min.js"></script>
		<script type="text/javascript" src="./school_overview_files/jquery.mmenu.min.all.js"></script>
		<script type="text/javascript" src="./school_overview_files/jquery.magnific-popup.min.js"></script>
		<script type="text/javascript" src="./school_overview_files/jquery.filer.min.js"></script>
		<script type="text/javascript" src="./school_overview_files/bootstrap-rating.js"></script>
		<script type="text/javascript" src="./school_overview_files/classie.js"></script> <!-- Popup -->
		<!--<script type="text/javascript" src="./school_overview_files/modalEffects.js"></script> <!-- Popup --> -->
	    <script type="text/javascript" src="./school_overview_files/main.js"></script>
        <script type="text/javascript" charset="UTF-8" src="js/cookie.js"></script>
        <script type="text/javascript" charset="UTF-8" src="js/util.js"></script>
        <script type="text/javascript" charset="UTF-8" src="js/angular.min.js"></script>
        <script src="node_modules/jquery-bar-rating/dist/jquery.barrating.min.js"></script>
        <script type="text/javascript" charset="UTF-8" src="css/bootstrap-3.3.7/dist/js/bootstrap.min.js"></script>
            
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyATQd6PfNXTkOI9cHvIo0eDPZAGKi9jSmI&libraries=places"
            type="text/javascript"></script>
    <script>
          
            $('.star-rating').barrating({
                theme: 'fontawesome-stars'
            });
            
           function load()
            {
                 
                
                 loadRatings();
                 $("#init_review_form").show();
                 $("#full_review_form").hide();
                 $("#full_fees_form").hide();
                
                 $('i.glyphicon-thumbs-up, i.glyphicon-thumbs-down').click(function(){    
                    var $this = $(this),
                    c = $this.data('count');    
                    if (!c) c = 0;
                    c++;
                    $this.data('count',c);
                    $('#'+this.id+'-bs3').html(c);
                    
                });      
                
                $(document).delegate('*[data-toggle="lightbox"]', 'click', function(event) {
                    event.preventDefault();
                    $(this).ekkoLightbox();
                });          
                
                if(typeof localStorage.getItem("sessionid") !== 'undefined')
                {
                    $("#login_div").hide();
                    $("#account_div").show();
                    $("#user_email").html(dtl_email);   
                }
                else
                {
                    $("#account_div").hide();    
                    $("#login_div").show();
                }

                var x = readCookie('school_id');
               
                if (x) { 
                    $("#init_review_form").show();
                    $("#full_review_form").hide();
                    $('#review_block').show();
                    //call php and get data of school
                    searchExactSchoolID(x);
                }
                
                //review image upload
                var readURL = function(input) {
                if (input.files && input.files[0]) {
                        var reader = new FileReader();

                        reader.onload = function (e) {
                            
                            $('#review-pic').attr('src', e.target.result);
                            
                            var review_pic = new Object();
                            review_pic.picPath = e.target.result;
                            review_pic.picData = e.target.result;
                            //review_pic.picData = e.target.result.split(",", 2)[1];  
                            reviewPicArray.push(review_pic);
                            
                            $('#review_pic_block').append("<img id='theImg' src='"+ e.target.result +"' width='200px' height='150px' />");
                        }

                        reader.readAsDataURL(input.files[0]);
                    }
                }

                $("#review_image-upload").on('change', function(){
                   readURL(this);
                });
               
                //fees file upload
                $("#fees_thumbnail_pic").hide();
                
                 var readFileURL = function(input) {
                if (input.files && input.files[0]) {
                        var reader = new FileReader();

                        reader.onload = function (e) {
                            
                            $('#fees_thumbnail_pic').attr('src', 'images\\file_icon.png');
                            $("#fees_thumbnail_pic").show();
                            
                            var fees_attach = new Object();
                            fees_attach.fileData = e.target.result;
                            fees_attach.ext      = input.files[0].name.substring(input.files[0].name.lastIndexOf('.'));	 
                            fees_file_attach_data = fees_attach;
                            
                        }
                    
                        reader.readAsDataURL(input.files[0]);
                    }
                }

                $("#fees_file_upload").on('change', function(){
                    if(checkFeesFileAttach(this))
                        {
                            readFileURL(this);
                        }
                });
                
                loadSchoolReviews();
                loadSchoolFees();
            }
        
        function loadRatings()
        {
            
            var formData = {
                    school_id     : readCookie('school_id')
             };

            console.log(formData);

              // process the formf
            $.ajax({
                type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                url         : '../api/load_data/load_school_average_rating.php', // the url where we want to POST
                data        : formData, // our data object
                dataType    : 'json', // what type of data do we expect back from the server
                encode          : true
            })
                // using the done promise callback
            .done(function(data) {   
                if(data.length != 0)
                    {
                        
                        if(data[0]['avg_rating'])
                            {
                                var rated = getRating(data[0]['avg_rating']);
                                $("#school_rating_desc").html("Rating : "+rated);
                                
                                $("#school-rating").val(data[0]['avg_rating']);
                            }
                        else 
                            {
                                $("#school-rating").val('');
                                $("#school_rating_desc").html("Unrated");
                            }
                    }

                // here we will handle errors and validation messages
            }).fail(function( xhr, status, errorThrown ) {
                    console.log( "Query Failed" );
                    console.log( "Error: " + errorThrown );
                    console.log( "Status: " + status );
                    console.dir( xhr );
                    return false;
            });
            
         
            
            $('#school-rating').change(function(){ 
                var rated = getRating($('select[name=school_selector]').val());
                $("#school_rating_desc").html("Rating : "+rated);
            });
            
            
        }
        
        function loadSchoolFees()
        {

                var formData = {
                        school_id     : readCookie('school_id')
                 };

                console.log(formData);

                  // process the formf
                $.ajax({
                    type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                    url         : '../api/load_data/load_fees.php', // the url where we want to POST
                    data        : formData, // our data object
                    dataType    : 'json', // what type of data do we expect back from the server
                    encode          : true
                })
                    // using the done promise callback
                .done(function(data) {

                    showFeesRecords(data);
        console.log("showing fees record ");

                    // here we will handle errors and validation messages
                }).fail(function( xhr, status, errorThrown ) {
                        console.log( "Query Failed" );
                        console.log( "Error: " + errorThrown );
                        console.log( "Status: " + status );
                        console.dir( xhr );
                        return false;
                });
            
        }
        
        
        function loadSchoolReviews()
        {
            
            var formData = {
                    school_id     : readCookie('school_id')
             };

            console.log(formData);

              // process the formf
            $.ajax({
                type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                url         : '../api/load_data/load_review.php', // the url where we want to POST
                data        : formData, // our data object
                dataType    : 'json', // what type of data do we expect back from the server
                encode          : true
            })
                // using the done promise callback
            .done(function(data) {

                showReviewRecords(data);

                // here we will handle errors and validation messages
            }).fail(function( xhr, status, errorThrown ) {
                    console.log( "Query Failed" );
                    console.log( "Error: " + errorThrown );
                    console.log( "Status: " + status );
                    console.dir( xhr );
                    return false;
            });
            
        }
        
        
        function processFeesData(username,fees_id,standard,fees_text,isAttach,pic_data,isProfilePicPath)
        {
           
            var formData = {
                    fees_id     : fees_id
             };

            console.log(formData);

              // process the formf
            $.ajax({
                type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                url         : '../api/load_data/load_fees_action.php', // the url where we want to POST
                data        : formData, // our data object
                dataType    : 'json', // what type of data do we expect back from the server
                encode          : true
            })
                // using the done promise callback
            .done(function(data) {
                //data may be 0 to 3 size 
                
                var dislikeCount,likeCount;
                
                for (i_data in data)
                    {
                        if(data[i_data]['action'] == 'L')
                            {
                                likeCount = data[i_data]['count'];
                            }
                        else if(data[i_data]['action'] == 'D')
                            {
                                dislikeCount = data[i_data]['count'];
                            }
                    }
                console.log("fees  --------------Dislike "+ dislikeCount);
                console.log("fees ---------------likeCount "+ likeCount);
                if(!dislikeCount)
                    dislikeCount = 0;
                if(!likeCount)
                    likeCount = 0;
                showFeesInUI(username,fees_id,standard,fees_text,isAttach,pic_data,isProfilePicPath,likeCount,dislikeCount);
                

                // here we will handle errors and validation messages
            }).fail(function( xhr, status, errorThrown ) {
                    console.log( "Query Failed" );
                    console.log( "Error: " + errorThrown );
                    console.log( "Status: " + status );
                    console.dir( xhr );
                    return false;
            });
            
           
        }
        
        
        function processReviewData(review_data)
        {
           
            var formData = {
                    review_id     : review_data.id_review_data,
                    type          : "D"
             };

            console.log(formData);

              // process the formf
            $.ajax({
                type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                url         : '../api/load_data/load_review_action.php', // the url where we want to POST
                data        : formData, // our data object
                dataType    : 'json', // what type of data do we expect back from the server
                encode          : true
            })
                // using the done promise callback
            .done(function(data) {
                //data may be 0 to 3 size 
                
                var dislikeCount,likeCount;
                
                for (i_data in data)
                    {
                        if(data[i_data]['action'] == 'L')
                            {
                                likeCount = data[i_data]['count'];
                            }
                        else if(data[i_data]['action'] == 'D')
                            {
                                dislikeCount = data[i_data]['count'];
                            }
                    }
                console.log("Dislike "+ dislikeCount);
                console.log("likeCount "+ likeCount);
                if(!dislikeCount)
                    dislikeCount = 0;
                if(!likeCount)
                    likeCount = 0;
                
                showReviewInUI(review_data,likeCount,dislikeCount);

                // here we will handle errors and validation messages
            }).fail(function( xhr, status, errorThrown ) {
                    console.log( "Query Failed" );
                    console.log( "Error: " + errorThrown );
                    console.log( "Status: " + status );
                    console.dir( xhr );
                    return false;
            });
            
           
        }
        
      
        function showReviewRecords(data)
        {
            
            for(review_i in data)
                {
                    processReviewData(data[review_i]);
                }
        }
        
      function showReviewInUI(data,likeCount,dislikeCount)
        {
                      console.log("-----later-----------Like count "+ likeCount);

                    
                    var newElement = document.createElement('div');
            newElement.innerHTML  = "<div class='comments-box'>" +
                                    "<div class='comments-thumb'>"+
                                        "<img class='img-circle' alt='comments-thumb-1' src='../api/image_upload/"+data.pic+"' width='100px' height='150px'>"+
                                    "</div>"+
                                    "<div class='comments-content'>"+
                                        "<div class='comments-meta-box'>"+
                                            "<div class='comments-author text-left'>"+
                                                "<div class='comments-name'>"+
                                                    data.username+
                                                "</div>"+
                                                "<div class='comments-date'>"+
                                                    "<span style='font-size:12px;'>"+data.review_date+"</span>"+
                                                "</div>"+
                                            "</div>"+

                                        "</div>"+
                                        "<div class='comments-description'>"+
                                            "<span id='sp_review_title'><p><h4>"+
                                            data.tbl_review_title+
                                            "</h4></p>"+
                                            "</span>"+
                                            "<span id='sp_review_text'>"+
                                            "<p>"+
                                               data.tbl_review_text+
                                            "</p>"+
                                            "</span>"+
                                            "<br>"+
                                            "<div id='pictorial_series_"+data.id_review_data+"'>"+
                                            "</div>"+
                                            "<br>"+
                                                                                
                                                "<div class='col-sm-1'>" +
                            "<i id='like"+data.id_review_data+"' onclick='reviewLiked("+data.id_review_data+")' class='glyphicon glyphicon-thumbs-up'></i> <div id='like"+data.id_review_data+"-bs3'>"+likeCount+"</div>"+
                                                "</div>"+
                                                "<div class='col-sm-1'>"+
                    "<i id='dislike"+data.id_review_data+"'  onclick='reviewDisliked("+data.id_review_data+")' class='glyphicon glyphicon-thumbs-down'></i> <div id='dislike"+data.id_review_data+"-bs3'>"+dislikeCount+"</div>"+
                                                "</div>"+
                                            "</div>"+
                                    "</div>"
                                "</div>";

                        var description_sections = document.getElementById("review_display");    
                        description_sections.appendChild(newElement);                    
                        loadImages(data.id_review_data);
        }
        
        
       function showFeesRecords(data)
        {       
           for(review_i in data)
           { 
    console.log(data[review_i]);
    processFeesData(data[review_i].username,data[review_i].id_fees_data,data[review_i].standard,data[review_i].fees_txt,true,data[review_i].pic,true);
           }
        }
        
        
        
        function loadImages(review_id_i)
        {
            var formData = {
                    review_id     : review_id_i
             };

            console.log(formData);

              // process the formf
            $.ajax({
                type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                url         : '../api/load_data/load_images.php', // the url where we want to POST
                data        : formData, // our data object
                dataType    : 'json', // what type of data do we expect back from the server
                encode          : true
            })
                // using the done promise callback
            .done(function(data) {
                showImages(data,review_id_i);
                // here we will handle errors and validation messages
            }).fail(function( xhr, status, errorThrown ) {
                    console.log( "Query Failed" );
                    console.log( "Error: " + errorThrown );
                    console.log( "Status: " + status );
                    console.dir( xhr );
                    return false;
            }); 
        }
        
        function showImages(picArray,review_id)
        {
             //populate through Pictorial Series and add in the pictorial thumbnail

            var pictorial_sections = document.getElementById("pictorial_series_"+review_id); 
            var _inc = 0;
            console.log("Number of Pictorial" + picArray.length);
             for(pic in picArray)
             { 
                 /// attachment_path,attachment_data 
                 var newPictorial = document.createElement('img');
                 var imgID = 'pictorial_'+review_id +'_'+_inc;
                 newPictorial.setAttribute('id', imgID );  //set id
                 newPictorial.setAttribute('src',"../api/image_upload/"+picArray[pic].attachment_path);  //set id
                 newPictorial.setAttribute('width', "400px" );  //set width
                 newPictorial.setAttribute('height', "280px" );  //set height
                 console.log("pic added");
                 pictorial_sections.appendChild(newPictorial);
                 _inc ++;
             }
        }
        /*
        function schoolBelongsToStudent(username,school_id)
        {
            var formData = {
                id_school     : school_id,
                user_id     : dtl_user_id,   
             };

            console.log(formData);

              // process the formf
            $.ajax({
                type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                url         : '../api/validate/validate_school.php', // the url where we want to POST
                data        : formData, // our data object
                dataType    : 'json', // what type of data do we expect back from the server
                encode          : true
            })
                // using the done promise callback
            .done(function(data) {

                 if(data['code'] == "1")
                    {
                        return true;        
                    }
                else 
                    {
                        return false;
                    }
                console.log(data); 

                // here we will handle errors and validation messages
            }).fail(function( xhr, status, errorThrown ) {
                    console.log( "Query Failed" );
                    console.log( "Error: " + errorThrown );
                    console.log( "Status: " + status );
                    console.dir( xhr );
                    return false;
            });
        }
        */
        
        function saveReview()
        {

            var formData = {
                id_school     : readCookie('school_id'),
                user_id       : dtl_user_id,
                title         : $("#dtl_review_title").val(),
                review_text   : $("#dtl_review_txt").val()
             };

            console.log(formData);

              // process the formf
            $.ajax({
                type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                url         : '../api/save_data/save_review_comments.php', // the url where we want to POST
                data        : formData, // our data object
                dataType    : 'json', // what type of data do we expect back from the server
                encode          : true
            })
                // using the done promise callback
            .done(function(data) {    
                review_id = data['review_id'];
                console.log("Review ID" + review_id); 
                reviewSuccess(review_id);

                showInUI(review_id,formData.title,formData.review_text);
                clearReview();
                // here we will handle errors and validation messages
            }).fail(function( xhr, status, errorThrown ) {
                    alert( "Sorry, there was a problem!" );
                    console.log( "Error: " + errorThrown );
                    console.log( "Status: " + status );
                    console.dir( xhr );
            });

        }
         function saveFeesUpdate()
        {

            var formData = {
                id_school     : readCookie('school_id'),
                user_id       : dtl_user_id,
                standard      : $("#dtl_Fees_class").val(),
                fees_text     : $("#dtl_fees_txt").val()
             };

            console.log(formData);

              // process the formf
            $.ajax({
                type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                url         : '../api/save_data/save_fees_data.php', // the url where we want to POST
                data        : formData, // our data object
                dataType    : 'json', // what type of data do we expect back from the server
                encode          : true
            })
                // using the done promise callback
            .done(function(data) {    
                fees_id = data['fees_id'];
                console.log("Fees ID" + fees_id); 
                if(fees_file_attach_data) //if file is uploaded
                {
                    feesSuccess(fees_id);
                    processFeesData(dtl_username,fees_id,formData.standard,formData.fees_text,true,profile_pic_data,false);
                }
                else
                {
                   processFeesData(dtl_username,fees_id,formData.standard,formData.fees_text,false,profile_pic_data,false);
                }
                clearFeesUpdate();
                // here we will handle errors and validation messages
            }).fail(function( xhr, status, errorThrown ) {
                    alert( "Sorry, there was a problem!" );
                    console.log( "Error: " + errorThrown );
                    console.log( "Status: " + status );
                    console.dir( xhr );
            });

        }
         function   feesSuccess(fees_id)
        {
                        
                console.log("saving fees attachment in database");
                var formData = {

                        fileName         : "file_"+fees_id,
                        fileData         :  fees_file_attach_data.fileData,
                        fees_id          : fees_id,
                        type             : fees_file_attach_data.ext 
                 };

                  // process the formf
                $.ajax({
                    type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                    url         : '../api/image_upload/attach_file.php', // the url where we want to POST
                    data        : formData, // our data object
                    dataType    : 'json', // what type of data do we expect back from the server
                    encode          : true
                })
                    // using the done promise callback
                .done(function(data) {

                    // log data to the console so we can see
                    console.log(data['code']);             

                    // here we will handle errors and validation messages
                }).fail(function( xhr, status, errorThrown ) {
                        alert( "Sorry, there was a problem!" );
                        console.log( "Error: " + errorThrown );
                        console.log( "Status: " + status );
                        console.dir( xhr );
                });

            
            
        }
 
        function   reviewSuccess(review_id)
        {
            //save the images if there             
            /*
              var review_pic = new Object();
                            review_pic.picPath = e.target.result;
                            review_pic.picData =e.target.result.split(",", 2)[1];
            */
            
            var _inc = 1;
            for(pic in reviewPicArray)
            {

                var formData = {

                        picName           : "pic_"+review_id+"_"+_inc,
                        picData           : reviewPicArray[pic].picData,
                        review_id         : review_id,
                        type              :"jpg"
                 };

                  // process the formf
                $.ajax({
                    type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                    url         : '../api/image_upload/attach_pic.php', // the url where we want to POST
                    data        : formData, // our data object
                    dataType    : 'json', // what type of data do we expect back from the server
                    encode          : true
                })
                    // using the done promise callback
                .done(function(data) {

                    // log data to the console so we can see
                    console.log(data['code']);             

                    // here we will handle errors and validation messages
                }).fail(function( xhr, status, errorThrown ) {
                        alert( "Sorry, there was a problem!" );
                        console.log( "Error: " + errorThrown );
                        console.log( "Status: " + status );
                        console.dir( xhr );
                });

            _inc ++;

            }
            
            
        }
	function getAttachmentData(fees_id,divName)
	{
		var attach_data;
		 var formData = {

                        fees_id           : fees_id
                 };

                  // process the formf
                $.ajax({
                    type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                    url         : '../api/load_data/load_file.php', // the url where we want to POST
                    data        : formData, // our data object
                    dataType    : 'json', // what type of data do we expect back from the server
                    encode          : true
                })
                    // using the done promise callback
                .done(function(data) {
			if(data[0])
			{
                    // log data to the console so we can see
                    drawAttachmentDiv(data[0]['attach_path'],divName,fees_id,data[0]['attach_type']);             
			}

                    // here we will handle errors and validation messages
                }).fail(function( xhr, status, errorThrown ) {
                        alert( "Sorry, there was a problem!" );
                        console.log( "Error: " + errorThrown );
                        console.log( "Status: " + status );
                        console.dir( xhr );
                });

	}
        
 function downloadURI(uri, name) {
      var link = document.createElement("a");
      link.download = name;
      link.href = "../api/image_upload/" + uri;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      delete link;
    }

	function drawAttachmentDiv(file_path,divName,fees_id,file_type)
	{

	
		if(file_path)
		{
		   console.log("attachment drawn for fees id "+ fees_id);
		   var fileName = "file_attach_"+fees_id+file_type;
           var newElement = document.createElement('a');  
		   newElement.setAttribute('href',"#");
           newElement.setAttribute('onclick',"downloadURI('"+file_path+"','"+fileName+"')");
           newElement.innerHTML ="Click to Download attachment";
           
            var downloadButton = document.getElementById(divName);
            downloadButton.appendChild(newElement);
            
        
		}
	}             
        function showFeesInUI(username,fees_id,standard,fees_text,isAttach,pic_data,isProfilePicPath,likeCount,dislikeCount)
        {
            
            console.log(standard,fees_text);
            var d = new Date();
            var strDate = d.getFullYear() + "-" + (d.getMonth()+1) + "-" + d.getDate();
	    
            if(true ==isProfilePicPath)
                {
                    pic_data = "../api/image_upload/"+pic_data;
                }
        
           var newElement = document.createElement('div');
            newElement.innerHTML  = "<div class='comments-box'>" +
                                    "<div class='comments-thumb'>"+
                                        "<img class='img-circle' alt='comments-thumb-1' src='"+pic_data+"' width='50' height='100'> "+
                                    "</div>"+
                                    "<div class='comments-content'>"+
                                        "<div class='comments-meta-box'>"+
                                            "<div class='comments-author text-left'>"+
                                                "<div class='comments-name'>"+
                                                    dtl_username+
                                                "</div>"+
                                                "<div class='comments-date'>"+
                                                    "<span style='font-size:12px;'>"+strDate+"</span>"+
                                                "</div>"+
                                            "</div>"+

                                        "</div>"+
                                        "<div class='comments-description'>"+
                                            "<span id='sp_fees_title'><p><h4>Fees Details for Class:"+
                                           standard+
                                            "</h4></p>"+
                                            "</span>"+
                                            "<span id='sp_fees_text'>"+
                                            "<p>"+
                                                fees_text+
                                            "</p>"+
                                            "</span>"+
                                            "<br>"+
                                            "<div id='file_series_"+fees_id+"'>"+
                                            "</div>"+
                                            "<br>"+
                                                                                
                                                "<div class='col-sm-1'>" +
                            "<i id='like"+fees_id+"' onclick='feesLiked("+fees_id+")' class='glyphicon glyphicon-thumbs-up'  style='color:blue'></i> <div id='like"+fees_id+"fees-bs3'>"+likeCount+"</div>"+
                                                "</div>"+
                                                "<div class='col-sm-1'>"+
                    "<i id='dislike"+fees_id+"'  onclick='feesDisliked("+fees_id+")' class='glyphicon glyphicon-thumbs-down'></i> <div id='dislike"+fees_id+"fees-bs3'>"+dislikeCount+"</div>"+
                                                "</div>"+
                                            "</div>"+
                                    "</div>"
                                "</div>";

            

            $("#fees_display").prepend(newElement.innerHTML);
             
            getAttachmentData(fees_id,'file_series_'+fees_id);
            
        }
        
        function showInUI(review_id,title,review_text)
        {
            
            console.log(title,review_text);
            var d = new Date();
            var strDate = d.getFullYear() + "-" + (d.getMonth()+1) + "-" + d.getDate();
        
           var newElement = document.createElement('div');
            newElement.innerHTML  = "<div class='comments-box'>" +
                                    "<div class='comments-thumb'>"+
                                        "<img class='img-circle' alt='comments-thumb-1' src='"+profile_pic_data+"' width='50' height='100'> "+
                                    "</div>"+
                                    "<div class='comments-content'>"+
                                        "<div class='comments-meta-box'>"+
                                            "<div class='comments-author text-left'>"+
                                                "<div class='comments-name'>"+
                                                    dtl_username+
                                                "</div>"+
                                                "<div class='comments-date'>"+
                                                    "<span style='font-size:12px;'>"+strDate+"</span>"+
                                                "</div>"+
                                            "</div>"+

                                        "</div>"+
                                        "<div class='comments-description'>"+
                                            "<span id='sp_review_title'><p><h4>"+
                                           title+
                                            "</h4></p>"+
                                            "</span>"+
                                            "<span id='sp_review_text'>"+
                                            "<p>"+
                                                review_text+
                                            "</p>"+
                                            "</span>"+
                                            "<br>"+
                                            "<div id='pictorial_series_"+review_id+"'>"+
                                            "</div>"+
                                            "<br>"+
                                                                                
                                                "<div class='col-sm-1'>" +
                            "<i id='like"+review_id+"' onclick='reviewLiked("+review_id+")' class='glyphicon glyphicon-thumbs-up'  style='color:blue'></i> <div id='like"+review_id+"-bs3'></div>"+
                                                "</div>"+
                                                "<div class='col-sm-1'>"+
                    "<i id='dislike"+review_id+"'  onclick='reviewDisliked("+review_id+")' class='glyphicon glyphicon-thumbs-down'></i> <div id='dislike"+review_id+"-bs3'></div>"+
                                                "</div>"+
                                            "</div>"+
                                    "</div>"
                                "</div>";

            
            $("#review_display").prepend(newElement.innerHTML);
             
            //populate through Pictorial Series and add in the pictorial thumbnail
            
            var pictorial_sections = document.getElementById("pictorial_series_"+review_id); 
            var _inc = 0;
            console.log("Number of Pictorial" + reviewPicArray.length);
             for(pic in reviewPicArray)
             { 
                 var newPictorial = document.createElement('img');
                 var imgID = 'pictorial_'+review_id +'_'+_inc;
                 newPictorial.setAttribute('id', imgID );  //set id
                 newPictorial.setAttribute('src', reviewPicArray[pic].picPath );  //set id
                 newPictorial.setAttribute('width', "300px" );  //set width
                 newPictorial.setAttribute('height', "180px" );  //set height

                console.log("pic added");
                 pictorial_sections.appendChild(newPictorial);
                 _inc ++;
             }
            
        }
 	function feesFormInit()
	{
		$("#full_fees_form").show();
		
	    $("#btn_initiate_fees").hide();
	}       
        
        function  initiateReviewForm()
        {
            $("#init_review_form").hide();
            $("#full_review_form").show();
        }
        
        function clearReview()
        {
            $("#init_review_form").show();
            $("#full_review_form").hide();
            
            $("#dtl_review_txt").val("");
            $("#dtl_review_title").val("");
            $("#review_pic_block").html("");
            
            reviewPicArray.splice(0,reviewPicArray.length);
            
        }
         function clearFeesUpdate()
        {
            $("#full_fees_form").hide();
            $("#dtl_fees_txt").val("");
	    $("#btn_initiate_fees").show();
            
        }
     
        function reviewLiked(review_id_i)
        {
            console.log("Review Liked "+ review_id_i);    
            saveUserAction(review_id_i,'L');
            
        }
        
        function saveUserAction(review_id_i,action)
        {
            // $review_id      = $_POST['review_id'];
            //$user_id        = $_POST['user_id'];
            var formData = {

                    review_id         : review_id_i,
                    user_id           : dtl_user_id,
                    user_action       : action
             };
            
            console.log(formData);

              // process the formf
            $.ajax({
                type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                url         : '../api/save_data/save_review_action.php', // the url where we want to POST
                data        : formData, // our data object
                dataType    : 'json', // what type of data do we expect back from the server
                encode          : true
            })
                // using the done promise callback
            .done(function(data) {
                
                // log data to the console so we can see
                console.log(data); 
                $("#like"+review_id_i+"-bs3")       .text( data['total_liked']    );
                $("#dislike"+review_id_i+"-bs3")    .text( data['total_disliked'] );

                // here we will handle errors and validation messages
            }).fail(function( xhr, status, errorThrown ) {
                    alert( "Sorry, there was a problem!" );
                    console.log( "Error: " + errorThrown );
                    console.log( "Status: " + status );
                    console.dir( xhr );
            });
            
        }
        
        function saveUserActionFees(fees_id,action)
        {
            
            var formData = {

                    fees_id           : fees_id,
                    user_id           : dtl_user_id,
                    user_action       : action
             };
            
            console.log(formData);

              // process the formf
            $.ajax({
                type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                url         : '../api/save_data/save_fees_action.php', // the url where we want to POST
                data        : formData, // our data object
                dataType    : 'json', // what type of data do we expect back from the server
                encode          : true
            })
                // using the done promise callback
            .done(function(data) {
                
                // log data to the console so we can see
                console.log(data); 
                $("#like"+fees_id+"fees-bs3")       .text( data['total_liked']    );
                $("#dislike"+fees_id+"fees-bs3")    .text( data['total_disliked'] );

                // here we will handle errors and validation messages
            }).fail(function( xhr, status, errorThrown ) {
                    alert( "Sorry, there was a problem!" );
                    console.log( "Error: " + errorThrown );
                    console.log( "Status: " + status );
                    console.dir( xhr );
            });
            
        }
        
        
        function reviewDisliked(review_id_i)
        {
            console.log("Review Disliked "+ review_id_i);
            saveUserAction(review_id_i,'D');
            
        }
        
        
        function feesDisliked(fees_id)
        {
            console.log("fees Disliked "+ fees_id);
            saveUserActionFees(fees_id,'D');
            
        }
        
        function feesLiked(fees_id)
        {
            console.log("fees Disliked "+ fees_id);
            saveUserActionFees(fees_id,'L');
            
        }
        
        </script>
    </div>
    </form>


</body></html>
