<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0055)http://microsoftmsdn.com/schoolguru/parent-profile.aspx -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="keywords" content="HTML5 Template"><meta name="description" content="Listingpro - Template HTML5"><meta name="author">
	
	<!-- Title -->
	<title>
	School Guru
</title>
	
	<!-- Mobile Meta -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	 
    <meta charset="utf-8">
	<!-- Favicon -->
	<link rel="shortcut icon" href="http://microsoftmsdn.com/schoolguru/images/favicon.png" type="image/x-icon">
    <link href="js/jquery-ui-1.11.4.custom/jquery-ui.css" rel="stylesheet" type="text/css">


	<!-- CSS -->
	<link href="./ParentProfile_files/bootstrap.css" type="text/css" rel="stylesheet">
    <link href="./ParentProfile_files/colors.css" type="text/css" rel="stylesheet">
    <link href="./ParentProfile_files/font.css" type="text/css" rel="stylesheet">
    <!--<link href="./ParentProfile_files/jquery.filer.css" type="text/css" rel="stylesheet"> -->
    <link href="./ParentProfile_files/jquery.filer-dragdropbox-theme.css" type="text/css" rel="stylesheet">
    <link href="./ParentProfile_files/component.css" type="text/css" rel="stylesheet">
    <link href="./ParentProfile_files/styles.min.css" type="text/css" rel="stylesheet">
    <link href="./ParentProfile_files/font-awesome.min.css" type="text/css" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="./ParentProfile_files/jquery.mmenu.all.css">
    <link href="./ParentProfile_files/mapbox.css" rel="stylesheet">
    <link href="./ParentProfile_files/chosen.css" rel="stylesheet">
    <link href="./ParentProfile_files/MarkerCluster.css" rel="stylesheet">
    <link href="./ParentProfile_files/MarkerCluster.Default.css" rel="stylesheet">
    <link href="./ParentProfile_files/main.css" type="text/css" rel="stylesheet">
    <link href="./css/common.css" type="text/css" rel="stylesheet">
    <style>
    .user-text h3
    {
        margin-bottom:15px !important;
    }
    .page-container {
    padding-bottom: 10px;
}
    </style>

    
<style>
.form-control
{
    margin-bottom:15px;
}
.page-container-second {
    padding-top: 30px;
    padding-bottom: 60px
}
    
    
/* google map style */
    
    #map {
        height: 300px;
        width: 100%;
      }
      .controls {
        margin-top: 10px;
        border: 1px solid transparent;
        border-radius: 2px 0 0 2px;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        height: 32px;
        outline: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
      }

      #pac-input {
        background-color: #fff;
        font-family: Roboto;
        font-size: 15px;
        font-weight: 300;
        margin-left: 12px;
        padding: 0 11px 0 13px;
        text-overflow: ellipsis;
        width: 300px;
      }

      #pac-input:focus {
        border-color: #4d90fe;
      }

      .pac-container {
        font-family: Roboto;
      }

      #type-selector {
        color: #fff;
        background-color: #4d90fe;
        padding: 5px 11px 0px 11px;
      }

      #type-selector label {
        font-family: Roboto;
        font-size: 13px;
        font-weight: 300;
      }
 
    
    
    
/* Google map style*/
</style>
    
    <script type="text/javascript" charset="UTF-8" src="js/util.js"></script>
    <script src="js/jquery-2.2.3.js"></script>  
    <script src="js/jquery-ui-1.11.4.custom/jquery-ui.js"></script>   
    <script src="js/angular.min.js"></script>  
    <script src="http://www.google.com/jsapi"></script>
    <script src="/assets/de6bba3f/js/plugins/purify.min.js"></script>
    <script src="/assets/prod/all-krajee.js"></script>
    <script src="/assets/de6bba3f/js/plugins/sortable.min.js"></script>
    <script src="/assets/de6bba3f/js/fileinput.min.js"></script>
    
</head>
<body onload="load()"><nav class="attireMainNav"><button class="toggleBtn iconMenu" type="button">Toggle navigation</button><ul></ul></nav>
<form method="post" action="#" id="form_id" onSubmit="return false">
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTE3OTk3MTgxMjRkZLg8PEAkusi4ZlcfuiGeVjsTLHojDXeRK0hOngGazPTa">
</div>

<div class="aspNetHidden">

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="E4B3AF92">
	<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEdABg05+iJmPSsi8MrEp3rhXKcGesOOO7wi3Uzz+yy2Y0Kc7t0vKVmDtQYb7KLGs2qWD2fVFyO0cCPrpER53fgJQ2ef9ouzpSgh9JAYfaBgOBF1jbdtU+KanXQVlOfZzrpxsmCX8Lp7Gxx4o3+jPo9Eis3pQXh6ctc7d6Z8yTyIGLWqxQdbSkcOCjNLf/0uiwACmyROqJZ6VjZHAo4OubqQY60iQePsqwZBn0oj+rRyBHv15FzIkL/tSG/ylS5PBFydkoI1Ma7p+kCUrkeJGFDdBfuYE8qXcdAPFZsUblRg19QXlOXfF45eaOsi7KcgHjb4Ve9/ShFCA2bFWTnLYRgfETDOpiXbgSGI0DV3V9q7MvblRUcvf22VuxozB5Cft1ZVGUJjb7kHC9l5BGZOsRb1M53PIx6lV8ytF4pkUEFKchQKYpso3c0BNdidhpUx9B3c1INeSKFy2zxLVV4+zExdQxF5BPdHG87XtyblNclsuAS8Iw7t+aOQlJ+rpluCTaRNadLD3xijzncSADYhcTX/GmxTtKqu+65iXcAoaut6kDoIA==">
</div>
    <div>
    <div id="page">
    <header class="">
		<div class="lp-topbar">
			<div class="container">
				<div class="row">
					<div class="col-md-8 col-sm-8 text-left">
						<ul class="lp-topbar-menu">
							<li>
								<a href="http://microsoftmsdn.com/schoolguru/index.html">Home</a>
							</li>
							<li>
								<a href="http://microsoftmsdn.com/schoolguru/about.html">About</a>
							</li>
							<li>
								<a href="http://microsoftmsdn.com/schoolguru/contact.html">Contact</a>
							</li>
						</ul>
					</div>
					<div class="col-md-4 col-sm-4 text-right">
						<div class="lp-join-now">
							<span>
								<!-- Contacts icon by Icons8 -->
								<img class="icon icons8-Contacts" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAADNElEQVRoge2ZLWhbURTHn3iig8IiIiomIgqrqJiomJgIrCKiomKig4iKioiKioiJiEJExURFRGEbRERMVERkENhE5BgTGUxEVERkUBERURFR8Zu45+5durzk3feRm7H8IRB455z3u9/3nOd5a6317wjYAcrAOdAEroAqcAhsuOabK8AHKsBX5qsP7LrmnSlgE+gasCMZhRpwDJwCDeBGnk+Bt8COa/Y/AjaAn0YDDgA/xNYH3j8YoUaY/VIlPQvwHdiKYO8De0AdGItvcxms86AKwL38rOe9bAoTacyzLBijglQE4jpBjHOJ8TFNNluItkAcJ4ixKzGGKaJZQ/QEopgwDgApYcUC0NtpIWEc5w3R227shQrkVqEhn4ThdYIYTyXGrzTZbCH04fYmQYznEqOfJpstRFUg3qUQ4zJNNluIA4H4nCDGtcQop8lmC1ESiElM/7zcCgD20+azAdE33lpMfx+4kBjttPlsQAYCETu/AIoSo5cmmy1E4vmNylcgwX0tsVDpLMAQqMbwr4mv88XuAx0BuYnhr6/wXVwnV8Aj4IcAvbDweyk+37LksxKqUgJQt/Cpi89VlmxWMnaeCZCLYJ8zplVxCYjRRZCbdObNd1lXOiFzt+WGieC6ohuTn2GTMxoBsOeCda5Qta2pATkGTlAFioL8HxnPR66ZQ2WcCQPCpbNKdzn6IhFcAPOow7ItozBGnRUVYHulG0JQDZkusNvSdqxSydTzPA9VOdTTaWGCBLSMKeh+wcsoNI0pBXARwa9m2N9LjOVWGlHnwCuCO5aGaROUT4/m+O8bdq0HndAFjsjyGwqq6n5GUHgGdTpfAttiUzeeNVBnS15+JbHVqolPAVUInxjPxqhS6sJbgm0jysCt8aIB6pvH5gzbU+COcE2Bs5COqhDUynRH/WUbpwE+6oONVh84jOC3I6PTkd4dy/86EbJJ1Ce6vvHe1qxOs2mIXgd3wEnsQPHfXzZGt0ecnIUgBR0ia8CFUAfoUFjsslDgCcHiK2XEaMOj04QpNgVzgg84X7LDs5MxzaMvfuCDtVPGQu2GAC0bJ3OrXTXdRm1EbmEo93ocd2TXWut/1W9KptrZf/2YyAAAAABJRU5ErkJggg==" alt="join-now">
							</span>
							<a class=" md-trigger" data-modal="modal-3">Join Now</a>
						</div>
					</div>
				</div>
			</div>
		</div><!-- ../topbar -->
		
	<div class="md-modal md-effect-3" id="modal-3">
			<div class="login-form-popup lp-border-radius-8">
				<div class="siginincontainer">
					<h2 class="text-center" style="font-size:30px;">Sign in</h2>
					<div class="form-horizontal margin-top-20" method="post">
						<div class="form-group">
						
                            <input name="ctl00$txt_uname" type="text" id="txt_uname" placeholder="Username or Email Address *" class="form-control" style="height:36px;">
							
						</div>
						<div class="form-group">
							
							<input name="ctl00$TextBox1" type="password" id="TextBox1" placeholder="Password *" class="form-control" style="height:36px;"> 
						</div>
						
						
						<div class="form-group">
                        <input type="submit" name="ctl00$Button1" value="Sign in" id="Button1" class="lp-secondary-btn width-full btn-first-hover" style="padding:8px 30px;">
						
						</div>
					</div>	
					<div class="pop-form-bottom">
						<div class="bottom-links">
							<a class="signUpClick">Not a member? Sign up</a>
							<a class="forgetPasswordClick pull-right">Forgot Password</a>
						</div>
						<p class="margin-top-15">Connect with your Social Network</p>
						<ul class="social-login list-style-none">
							<li><button id="logingoogle" class="google flaticon-googleplus"><i class="fa fa-google-plus"></i><span>Sign In</span></button></li>
							<li><button id="loginfacebook" class="facebook flaticon-facebook"><i class="fa fa-facebook"></i><span>Sign In</span></button></li>
							
						</ul>
					</div>
				<a class="md-close"><i class="fa fa-close"></i></a>
				</div>
				<div class="siginupcontainer">
					<h2 class="text-center" style="font-size:30px;">Sign Up</h2>
					<div class="form-horizontal margin-top-30" method="post">
						<div class="form-group">
							
							<input name="ctl00$TextBox2" type="text" id="TextBox2" placeholder="Username *" class="form-control" style="height:36px;">
						</div>
						<div class="form-group">
						
							<input name="ctl00$TextBox3" type="text" id="TextBox3" placeholder="Email Address *" class="form-control" style="height:36px;">
						</div>
						<div class="form-group">
							
							<input name="ctl00$TextBox4" type="password" id="TextBox4" placeholder="Password *" class="form-control" style="height:36px;"> 
						</div>
						<div class="form-group">
							<input type="submit" name="ctl00$Button2" value="Sign in" id="Button2" class="lp-secondary-btn width-full btn-first-hover" style="padding:8px 30px;"> 
						</div>
					</div>	
					<div class="pop-form-bottom">
						<div class="bottom-links">
							<a class="signInClick"> have an account? Sign in</a>
							<a class="forgetPasswordClick pull-right">Forgot Password</a>
						</div>
						<p class="margin-top-15">Connect with your Social Network</p>
						<ul class="social-login list-style-none">
							<li><button id="Button3" class="google flaticon-googleplus"><i class="fa fa-google-plus"></i><span>Sign Up</span></button></li>
							<li><button id="Button4" class="facebook flaticon-facebook"><i class="fa fa-facebook"></i><span>Sign Up</span></button></li>
							
						</ul>
					</div>
				<a class="md-close"><i class="fa fa-close"></i></a>
				</div>
				<div class="forgetpasswordcontainer">
                <h2 class="text-center" style="font-size:30px;">Forgot Password?</h2>
					<h1 class="text-center"></h1>
					<div class="form-horizontal margin-top-30" method="post">
						<div class="form-group">
						<input name="ctl00$TextBox5" type="text" id="TextBox5" placeholder="Enter Your Email Address" class="form-control" style="height:36px;">
						</div>
						<div class="form-group">
							<input type="submit" name="ctl00$Button5" value="Get New Password" id="Button5" class="lp-secondary-btn width-full btn-first-hover" style="padding:8px 30px;"> 
						</div>
					</div>	
					<div class="pop-form-bottom">
						<div class="bottom-links">
							<a class="cancelClick">Cancel</a>
						</div>
					</div>
				<a class="md-close"><i class="fa fa-close"></i></a>
				</div>
			</div>	
		</div>
		
		<!-- Popup Open -->
		<div class="md-modal md-effect-3" id="modal-2">
			<div class="container">
				<div class="md-content ">
					<div class="row popup-inner-left-padding ">
						<div class="col-md-6 lp-insert-data">
						</div>
						<div class="col-md-6">
							<div id="quickmap" class="quickmap"></div>
							<a class="md-close widget-map-click"><i class="fa fa-close"></i></a>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Popup Close -->
		<div class="md-overlay"></div> <!-- Overlay for Popup -->
							
		<div class="lp-menu-bar  lp-menu-bar-color">
			<div class="container">
					<div class="row">
						<div class="col-md-4 col-xs-6 lp-logo-container">
							<div class="lp-logo">
								<a href="index.html">
									<img src="./ParentProfile_files/logo.png" alt="">
								</a>
							</div>
						</div>
						<div class="col-xs-6 mobile-nav-icon">
							<a href="user_profile.html" class="nav-icon">
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</a>
						</div>
						<div class="col-md-8 col-xs-12 lp-menu-container">
							<div class="pull-right lp-add-listing-btn">
								<ul>
									<li><a href="admin.html" style="line-height: 80px;"><i class="fa fa-plus"></i> Add Schools</a></li>
								</ul>
							</div>
							<div class="lp-menu pull-right menu">
								<ul>
									<li><a href="search.html" style="line-height: 80px;">Schools </a>
										
									</li>
									<li><a href="user_profile.html" style="line-height: 80px;">Parents </a>
										
									</li>
                                    <li><a href="user_profile.html" style="line-height: 80px;">Students </a>
										
									</li>
								
								</ul>
							</div>
						</div>
					</div>
				</div>
		</div>
		
	</header>
        
<div class="page-heading listing-page archive-page ">
			<div class="page-heading-inner-container text-center">
                
                <div class="row">
                    
                    <div class="col-md-10">
                        <center>
                        <h1>Complete Profile</h1>
                        </center>
                    </div>
                    <div class="col-md-2">
                        <h4 style="color:white;"><span id="loginEmailId"></span></h4>
                    </div>
                
                </div>
				
				
			</div>
			<div class="page-header-overlay"></div>
		</div>
        <section class="aliceblue">
		<div class="container page-container-second">
	
            <div class="row">
				<div class="col-md-12  padding-40 blog-single-inner-container lp-border lp-border-radius-8">
                <div class="row">
            <div class="col-md-3"> <p class="mt0" style="font-size:18px;"><b>Your Name </b></p></div>
            <div class="col-md-5"><input name="school_name" type="text" id="dtl_name" class="form-control"></div>
            <div class="clearfix"></div>
            <div class="col-md-3"> <p class="mt0" style="font-size:18px;"><b>Profile Pic </b></p></div>
            <div class="col-md-5">
                
            <img id="profile-pic" src="images/default_avatar_male.jpg" width="200px" height="150px" /> <br>
       
            <input id="file-upload" type="file" accept="image/*" hidden="true" value="Upload Profile Image" class="lp-search-btn" style="float:left;padding:8px 15px;"/>
                    
            </div>
            <div class="clearfix"></div>        
            <div class="col-md-3"> <p class="mt0" style="font-size:18px;"><b>Address</b></p></div>
            <div class="col-md-5"><input name="address" type="text" id="dtl_address" class="form-control"></div>       
            <div class="clearfix"></div>
            <div class="col-md-3"> <p class="mt0" style="font-size:18px;"><b>Contact</b></p></div>
            <div class="col-md-5"><input name="contact" type="text" id="dtl_contact" class="form-control"></div>
            <div class="clearfix"></div>
            <div class="col-md-3"> <p class="mt0" style="font-size:18px;"><b>Email</b></p></div>
            <div class="col-md-5"><input name="email" type="text" id="dtl_email" class="form-control"></div>
            <div class="clearfix"></div>
            <div class="col-md-3"> <p class="mt0" style="font-size:18px;"><b>City</b></p></div>
            <div class="col-md-5"><input name="city" type="text" id="dtl_city" class="form-control"></div>
            <div class="clearfix"></div>
            <div class="col-md-3"> <p class="mt0" style="font-size:18px;"><b>Country</b></p></div>
            <div class="col-md-5"><select name="country" id="country" class="form-control">
                    <option value="India" selected="true">India</option>
            </select>
            </div>
            <div class="clearfix"></div>
            <div class="col-md-3"> <p class="mt0" style="font-size:18px;"><b>Are You Parent</b></p></div>
            <div class="col-md-5"><select name="profile" id="dtl_role" class="form-control" onchange="onProfileChange()">
                    <option value="parent" selected="true">Yes</option>
                    <option value="student" selected="true">No</option>
            </select>
            </div>
            </div>
            
            <div id="parentForm"> 
                <div class="row">
                    <div class="col-md-8">
                    <hr>    
                     <div id="added_child">
                             <!-- child Information would be shown here  would be shown here --->
                    </div>
                </div>
                </div>
                <div class="row">
                    <div class="col-md-8">    
                     <div id="added_child_school">
                        <!-- schools would be shown here --->
                    </div>
                </div>
                </div>
                <div class="row">
                    <div id="child_form">

                    </div>   <!-- child form -->
                </div>   
                <div class="row">
                    <div id="perChildDiv">

                    </div>   <!-- per school div -->
                </div>   
                <div class="row">
                <div class="col-md-1">
                       <input type="button" name="addChile" value="Add Child" id="add_child" class="lp-search-btn" style="float:left;padding:8px 15px;"> 
                      
                </div>
                <div class="col-md-6"></div>
                <div class="col-md-1">
                    <input type="button" name="addcollege" value="Add College" id="add_college_for_child" class="lp-search-btn" style="float:left;padding:8px 15px;"> 
                    
                    <!--   <input type="button" name="savechilddata" value="Save" id="save_child" class="lp-search-btn" style="float:left;padding:8px 15px;"> -->
                    
                    </div>
                </div>
              
            </div>
            
           
           <div id="studentForm"> 
               
                <div class="row">
                <div class="col-md-8"><hr>
                    <div id="added_school">
                        
                    </div>
                    
                    </div>
                </div>
                <div class="row">
                     <div id="perSchoolDiv">

                    </div>   <!-- per school div -->
               </div>
                <div class="row">
                <div class="clearfix"></div>
                    <div class="col-md-1">
                           <input type="button" name="add_school" value="Add College" id="add_school_button" class="lp-search-btn" style="float:left;padding:8px 15px;">    
                    </div>
                </div>
           </div>
           
           
                    
                    
                    
            <div class="row">
            <!-- End of the school admin creation form -->
            <div class="clearfix"></div>
            <div class="col-md-3">
            
            </div>
          
            <div class="col-md-5">
                   <div class="clearfix"></div>
                
                <input type="submit" name="save_button" value="Submit" id="save_button" class="lp-search-btn" style="float:right;padding:8px 15px;" onclick="saveInDB()"></div>
        
            </div>
                </div>			
				</div>
        
			</div>
            
		</section></div>
            
            <div id="child_input_form">
                <div class="row">
                    <div class="col-md-8">
                        <h3> Enter Child Details </h3>
                    </div>
                </div>
                <div class="row">     
                    <div class="clearfix"></div>
                    <div class="col-md-3"> <p class="mt0" style="font-size:18px;"><b>Name of Child</b></p></div>
                    <div class="col-md-5"><input name="child_name" type="text" id="dtl_child_name" class="form-control"></div>
                </div>
                <div class="row">     
                    <div class="clearfix"></div>
                    <div class="col-md-3"> <p class="mt0" style="font-size:18px;"><b>Age of Child</b></p></div>
                    <div class="col-md-5"><input name="child_age" type="text" id="dtl_child_age" class="form-control"></div>
                </div>
                <!--
                 <div class="row">     
                      <div class="col-md-2"><input type="button" name="save_child" value="save" id="save_child" class="lp-search-btn" style="float:left;padding:8px 15px;"> </div>
                        <div class="col-md-2"></div>
                        <div class="col-md-2"></div>
                        <div class="col-md-2"><input type="button" name="cancel_child" value="cancel" id="cancel_child" class="lp-search-btn" style="float:right;padding:8px 15px;"> </div>
                </div> -->
            </div>
             <div id="school_input_form" >
                        <div class="row">
                            <div class="col-md-8">
                            
                                <h3> Enter School Details </h3>
                            </div>
                        </div>
                        
                        <div class="row">
                         <div class="clearfix"></div>
                                <div class="col-md-3"> <p class="mt0" style="font-size:18px;"><b>Select Your School</b></p></div>
                                <div class="col-md-5"><select name="school_name" id="dtl_std_schoolname" class="form-control" onchange="ifOtherChosen()"> 
                                </select>
                            </div>
                            
                        </div>
                        
                        <div class="row">
                        
                            <div class="clearfix"></div>
                            <div class="otherSchoolName">
                                  <div class="col-md-3"> <p class="mt0" style="font-size:18px;"><b>Enter Name of School</b></p></div>
                                    <div class="col-md-5"><input name="other_school_name" type="text" id="dtl_std_otherSchoolName" class="form-control"></div>
                            </div>
                        
                        </div>
                        
                        <div class="row">
                        
                        
                             <div class="clearfix"></div>
                                      <div class="col-md-3"> <p class="mt0" style="font-size:18px;"><b>Enter Class</b></p></div>
                                    <div class="col-md-5">
                                  <select name="class_name" id="dtl_std_classname" class="form-control">

                                        <option value="nursery">Nursery</option>    
                                        <option value="LKg">LKg</option>    
                                        <option value="UKg">UKg</option>    
                                        <option value="1">1st</option>    
                                        <option value="2">2nd</option>    
                                        <option value="3">3rd</option>    
                                        <option value="4">4th</option>    
                                        <option value="5">5th</option>    
                                        <option value="6">6th</option>    
                                        <option value="7">7th</option>    
                                        <option value="8">8th</option>    
                                        <option value="9">9th</option>    
                                        <option value="10">10th</option>    
                                        <option value="11">11th</option>    
                                        <option value="12">12th</option>    

                                    </select>
                            
                            </div>
                        
                        </div>
                        
                        
                    <div class="row">
                        
                         <div class="clearfix"></div>
                            <div class="col-md-3"> <p class="mt0" style="font-size:18px;"><b>Rate Your School</b></p></div>
                            <div class="col-md-5">
                            <!-- rating School -->
                                            <table class="rating" style="font-size:14px;">   
                                                <tr class="rat_head">
                                                    <th> Category </th>
                                                    <th> Bad </th>
                                                    <th> Better</th>
                                                    <th> Good</th>
                                                    <th> Best</th>
                                                    <th> Excellent</th>
                                                </tr>
                                                <tr class="rat">
                                                     <td class="rat-topic">Studies </td>
                                                      <td class="rat_row"><input type="radio" id="rating_studies" name="rating_studies" value="0"></td>
                                                      <td class="rat_row"><input type="radio" id="rating_studies" name="rating_studies" value="1"> </td>
                                                      <td class="rat_row"><input type="radio" id="rating_studies" name="rating_studies" value="2" checked> </td>
                                                      <td class="rat_row"><input type="radio" id="rating_studies" name="rating_studies" value="3"></td>
                                                      <td class="rat_row"><input type="radio" id="rating_studies" name="rating_studies" value="4"> </td>     
                                                
                                                </tr>
                                                
                                                <tr class="rat">
                                                    <td class="rat-topic">Laboratories </td>
                                                    <td class="rat_row"><input type="radio" id="rating_labs" name="rating_labs" value="0"></td>
                                                    <td class="rat_row"><input type="radio" id="rating_labs" name="rating_labs" value="1"> </td>
                                                    <td class="rat_row"><input type="radio" id="rating_labs" name="rating_labs" value="2" checked> </td>
                                                    <td class="rat_row"><input type="radio" id="rating_labs" name="rating_labs" value="3"> </td>
                                                    <td class="rat_row"><input type="radio" id="rating_labs" name="rating_labs" value="4"> </td>
                                                </tr>
                                                
                                                <tr class="rat">
                                                    <td class="rat-topic">Sports</td>
                                                  <td class="rat_row"><input type="radio" id="rating_sports" name="rating_sports" value="0"> </td>
                                                  <td class="rat_row"><input type="radio" id="rating_sports" name="rating_sports" value="1"> </td>
                                                  <td class="rat_row"><input type="radio" id="rating_sports" name="rating_sports" value="2" checked> </td>
                                                  <td class="rat_row"><input type="radio" id="rating_sports" name="rating_sports" value="3"> </td>
                                                  <td class="rat_row"><input type="radio" id="rating_sports" name="rating_sports" value="4"> </td>
                                                
                                                </tr>
                                                
                                                <tr class="rat">
                                                    <td class="rat-topic">Library</td>
                                                  <td class="rat_row"><input type="radio" id="rating_library"  name="rating_library" value="0">  </td>
                                                  <td class="rat_row"><input type="radio" id="rating_library" name="rating_library" value="1">  </td>
                                                  <td class="rat_row"><input type="radio" id="rating_library" name="rating_library" value="2" checked>  </td>
                                                  <td class="rat_row"><input type="radio" id="rating_library" name="rating_library" value="3"> </td>
                                                  <td class="rat_row"><input type="radio" id="rating_library" name="rating_library" value="4"> </td>
                                                
                                                </tr>
                                                
                                                <tr class="rat">
                                              <td class="rat-topic">Teachers & Administration</td>
                                              <td class="rat_row"><input type="radio" id="rating_admin" name="rating_admin" value="0"> </td>
                                              <td class="rat_row"><input type="radio" id="rating_admin" name="rating_admin" value="1"> </td>
                                              <td class="rat_row"><input type="radio" id="rating_admin" name="rating_admin" value="2" checked>  </td>
                                              <td class="rat_row"><input type="radio" id="rating_admin" name="rating_admin" value="3">  </td>
                                               <td class="rat_row"><input type="radio" id="rating_admin" name="rating_admin" value="4">  </td>
                                               </tr>
                                            </table>                
                                
                               
                          
                             </div>
                           
                        
                        </div>
                        
                        <div class="row">
                          <div class="clearfix"></div>
                                <div class="col-md-3"> <p class="mt0" style="font-size:18px;"><b>Period of Study</b></p></div>
                            <div class="col-md-5">
                                Start
                           
                                <select name="school_name" id="dtl_start_class" class="form-control">
                                    
                                    <option value="nursery">Nursery</option>    
                                    <option value="LKg">LKg</option>    
                                    <option value="UKg">UKg</option>    
                                    <option value="1">1st</option>    
                                    <option value="2">2nd</option>    
                                    <option value="3">3rd</option>    
                                    <option value="4">4th</option>    
                                    <option value="5">5th</option>    
                                    <option value="6">6th</option>    
                                    <option value="7">7th</option>    
                                    <option value="8">8th</option>    
                                    <option value="9">9th</option>    
                                    <option value="10">10th</option>    
                                    <option value="11">11th</option>    
                                    <option value="12">12th</option>    
                                    
                                </select>
                          
                                End
                          
                          
                            <select name="school_name" id="dtl_end_class" class="form-control">
                                <option value="nursery">Nursery</option>    
                                    <option value="LKg">LKg</option>    
                                    <option value="UKg">UKg</option>    
                                    <option value="1">1st</option>    
                                    <option value="2">2nd</option>    
                                    <option value="3">3rd</option>    
                                    <option value="4">4th</option>    
                                    <option value="5">5th</option>    
                                    <option value="6">6th</option>    
                                    <option value="7">7th</option>    
                                    <option value="8">8th</option>    
                                    <option value="9">9th</option>    
                                    <option value="10">10th</option>    
                                    <option value="11">11th</option>    
                                    <option value="12">12th</option>    
                                </select>
                          
                            </div>
                            
                          <div class="clearfix"></div>
                        <div class="col-md-3"> <p class="mt0" style="font-size:18px;"><b>Write a Brief Introduction on the school</b></p></div>
                        <div class="col-md-5"><textarea name="small_description" rows="2" cols="20" id="small_description" class="form-control" style="height:100px;">                
                        </textarea></div>   
                        
                        
                        <div class="clearfix"></div>
                            <div class="col-md-3"> <p class="mt0" style="font-size:18px;"><b>Write about Admission Procedure </b></p></div>
                            <div class="col-md-5"><textarea name="admission_description" rows="2" cols="20" id="admission_description" class="form-control" style="height:100px;"></textarea></div>
                        </div>
                        <div class="col-md-2"><input type="button" name="savebutton" value="save" id="save_college" class="lp-search-btn" style="float:left;padding:8px 15px;"> </div>
                        <div class="col-md-2"></div>
                        <div class="col-md-2"></div>
                        <div class="col-md-2"><input type="button" name="cancel" value="cancel" id="cancel_college" class="lp-search-btn" style="float:right;padding:8px 15px;"> </div>
                        
                    <div class="clearfix"></div>
                    </div>
	

        <footer class="text-center">
		<div class="footer-upper-bar">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<ul class="footer-menu">
							<li><a href="index.html">Home</a></li>
							<li><a href="">Blog</a></li>
							<li><a href="">Contact</a></li>
							<li><a href="">Join Us</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div><!-- ../footer-upper-bar -->
		<div class="footer-bottom-bar">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<ul class="footer-about-company">
							<li>Copyright Â© 2016 Schoolguru</li>
							<li>gta4roy@gmail.com</li>
							<li>Tel: +91 7829712286</li>
						</ul>
						<p class="credit-links"> Designed &amp; Developed by<a href="" target="_blank"> Gaurav & Abhijit</a></p><a href="" target="_blank">
						</a><ul class="social-icons footer-social-icons"><a href="" target="_blank">
							</a><li><a href="" target="_blank"></a><a href="http://microsoftmsdn.com/schoolguru/parent-profile.aspx#">
								<img class="icon icons8-Facebook" src="./ParentProfile_files/facebook.png" alt="facebook"></a></li>
							<li><a href="http://microsoftmsdn.com/schoolguru/parent-profile.aspx#">
								<img class="icon icons8-Google-Plus" src="./ParentProfile_files/google-plus.png" alt="google-plus"></a></li>
							<li><a href="http://microsoftmsdn.com/schoolguru/parent-profile.aspx#">
								<img class="icon icons8-LinkedIn" src="./ParentProfile_files/linkidin.png" alt="linkedin"></a></li>
							
							<li><a href="http://microsoftmsdn.com/schoolguru/parent-profile.aspx#">
								<img class="icon icons8-Tumblr" src="./ParentProfile_files/twitter.png" alt="twitter"></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</footer>
	<a href="#" class="add-listing-mobile lp-search-btn">Add listing</a>
        </div>

    
    </form>
  
    
    
    <script>
        
        
        
        var school_data_arr = [];
        
        var child_data_arr = [];
        
        var div_locate = new Object();
        var childDivLocate = new Object();
        var div_map    = new Object();
        var child_map = new Object();
        var childIndex = 0;
        
        var addedIndex = 0;
        
        var addState  = false;
        var editState = false;
        
        var presentChildCommand = ""; //edithe add_child add_college
        var lastChildCommand  = "";
        var profilePicData ;
        var profilePicPath ;
        var lastEditedIndex = -1;
    
        var user_info = {
            name :"", 
            address:"",
            contact:"",
            email:"",
            city:"",
            country:"",
            isParent:false,
            username: ""
        };
        
        var school_data = {
                           id:"",
                           name:"", 
                           std:"",
                           rate_study:0, 
                           rate_lab:0,
                           rate_sports:0,
                           rate_lib:0,
                           rate_teacher:0,
                           period_start:"",
                           period_end:"",
                           brief_intro:"",
                           admin_intro:""
                          };
        
      
    function saveInDB ()  
    {
                
        //submit procedure 
        var confirmSave = false;

        var r = confirm("Please save all schools and child data and then confirm");
        if (r == true){
            confirmSave = true;
        }else{
            confirmSave = false;
        }

        if(confirmSave)
        {
            saveUserInfoInDB();
            if(user_info.isParent)
            {
                saveChildDatInDB();
            }
            else
            {
                //schools 
                saveSchoolsInDB();
                
            }
        }
    }
        
   
    function saveUserInfoInDB()
        {
              var formData = {
                      'name'              : user_info.name,
                      'address'           : user_info.address,
                      'contact'           : user_info.contact,
                      'email'             : user_info.email,
                      'city'              : user_info.city,      
                      'isParent'          : user_info.isParent,
                      'country'           : user_info.country,
                      'user_name'         : user_info.username
                };

              alert(JSON.stringify(formData,null,2));
                
                // process the formf
                $.ajax({
                    type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                    url         : '../api/save_data/save_user_info.php', // the url where we want to POST
                    data        : formData, // our data object
                    dataType    : 'json', // what type of data do we expect back from the server
                    encode          : true
                })
                    // using the done promise callback
                    .done(function(data) {

                        // log data to the console so we can see
                        console.log(data); 

                        // here we will handle errors and validation messages
                    });
            
             var profileData = {
                      'name'           : user_info.username,
                      'type'           : 'png',
                       'data'          : profilePicData
                };
            
       
            
            $.ajax({
                    url: '../api/image_upload/profile_pic.php', 
                    type: 'POST',
                    data: profileData,
                    dataType    : 'json', // what type of data do we expect back from the server
                    encode          : true
                
             }).done(function(data){
                
                console.log("profile pic uploaded ");
            });
            
        
            
        }
        
        
        
        function saveSchoolsInDB()
        {
                //one by one add schools in the table
              for(school_data_i in school_data_arr)
                    {
                        
                        var formData = {
                      
                                id             : school_data_arr[school_data_i].id,
                                name           : school_data_arr[school_data_i].name,
                                std            : school_data_arr[school_data_i].std,
                                rate_study     : school_data_arr[school_data_i].rate_study,
                                rate_lab       : school_data_arr[school_data_i].rate_lab,
                                rate_sports    : school_data_arr[school_data_i].rate_sports,
                                rate_lib       : school_data_arr[school_data_i].rate_lib,
                                rate_teacher   : school_data_arr[school_data_i].rate_teacher,
                                period_start   : school_data_arr[school_data_i].period_start,
                                period_end     : school_data_arr[school_data_i].period_end,
                                brief_intro    : school_data_arr[school_data_i].brief_intro,
                                admin_intro    : school_data_arr[school_data_i].admin_intro,
                                username       : user_info.username
                         };
                        
                          // process the formf
                        $.ajax({
                            type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                            url         : '../api/save_data/save_child_school.php', // the url where we want to POST
                            data        : formData, // our data object
                            dataType    : 'json', // what type of data do we expect back from the server
                            encode          : true
                        })
                            // using the done promise callback
                        .done(function(data) {

                            // log data to the console so we can see
                            console.log(data); 

                            // here we will handle errors and validation messages
                        }).fail(function( xhr, status, errorThrown ) {
                                alert( "Sorry, there was a problem!" );
                                console.log( "Error: " + errorThrown );
                                console.log( "Status: " + status );
                                console.dir( xhr );
                        });
                      
                    }
        }
        
    $("#address").keyup(function(){
            $("#pac-input").val($(this).val());
    });
        
    $("#pac-input").keyup(function(){
            $("#address").val($(this).val());
    });
        

     function saveChildDatInDB()
    {
        
          for(child_data_i in child_data_arr)
              {
                var child_name  =   child_data_arr[child_data_i].name;
                var child_age   =   child_data_arr[child_data_i].age;
                var school_arr  =   child_data_arr[child_data_i].school_data_arr;
                var user_name   =   user_info.username;  
                var child_id;
                  
                   var formData = {
                            child_name     : child_name,
                            child_age      : child_age,
                            user_name      : user_name
                         };
                  console.log("Child data been saved "+formData);
                   $.ajax({
                            type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                            url         : '../api/save_data/save_child_data.php', // the url where we want to POST
                            data        : formData, // our data object
                            dataType    : 'json', // what type of data do we expect back from the server
                            encode          : true
                        })
                            // using the done promise callback
                            .done(function(data) {

                                // log data to the console so we can see
                                console.log("Child ID add:" +data['child_id']); 
                                child_id = data['child_id'];
                                console.log(child_id);
                  
                                    for(school_data_i in school_arr)
                                    {

                                        var formData = {

                                                id             : school_arr[school_data_i].id,
                                                name           : school_arr[school_data_i].name,
                                                std            : school_arr[school_data_i].std,
                                                rate_study     : school_arr[school_data_i].rate_study,
                                                rate_lab       : school_arr[school_data_i].rate_lab,
                                                rate_sports    : school_arr[school_data_i].rate_sports,
                                                rate_lib       : school_arr[school_data_i].rate_lib,
                                                rate_teacher   : school_arr[school_data_i].rate_teacher,
                                                period_start   : school_arr[school_data_i].period_start,
                                                period_end     : school_arr[school_data_i].period_end,
                                                brief_intro    : school_arr[school_data_i].brief_intro,
                                                admin_intro    : school_arr[school_data_i].admin_intro,
                                                username       : user_info.username,
                                                child_id       : child_id
                                         };

                                        console.log("school data been saved "+ formData)

                                          // process the formf
                                        $.ajax({
                                            type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
                                            url         : '../api/save_data/save_per_user_child.php', // the url where we want to POST
                                            data        : formData, // our data object
                                            dataType    : 'json', // what type of data do we expect back from the server
                                            encode          : true
                                        })
                                            // using the done promise callback
                                            .done(function(data) {

                                                // log data to the console so we can see
                                                console.log(data); 

                                                // here we will handle errors and validation messages
                                            }).fail(function( xhr, status, errorThrown ) {
                                                    alert( "Sorry, there was a problem!" );
                                                    console.log( "Error: " + errorThrown );
                                                    console.log( "Status: " + status );
                                                    console.dir( xhr );
                                            });

                                    }
                       
                                // here we will handle errors and validation messages
                            })
                   .fail(function( xhr, status, errorThrown ) {
                        alert( "Sorry, there was a problem!" );
                        console.log( "Error: " + errorThrown );
                        console.log( "Status: " + status );
                        console.dir( xhr );
                      })
                      // Code to run regardless of success or failure;
                      .always(function( xhr, status ) {
                        alert( "The request is complete!" );
                      });
                  
                
                  
                  
              }
            
    }
    
      
      
    function load()
        {
           
            var readURL = function(input) {
            if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        $('#profile-pic').attr('src', e.target.result);
                        profilePicPath = e.target.result
                        profilePicData    =e.target.result.split(",", 2)[1];
                    }

                    reader.readAsDataURL(input.files[0]);
                }
            }


            $("#file-upload").on('change', function(){
                readURL(this);
            });

            $("#save_button").hide();
            
            if(typeof localStorage.getItem("sessionid") !== 'undefined')
                {
                    username = localStorage.getItem("username");
                    email    = localStorage.getItem("email");        
                    user_info.username = username;
                    console.log(username);
                    $('#dtl_email').val(email);
                    $('#loginEmailId').text(email);
                  
                    $('#parentForm').hide();
                    $('#studentForm').show();
                  //  $('#school_info_div').hide();
                  
                    
                    initialise();
                }
                else 
                {
                    alert("Please login again");
                    window.location("main.html");
                }
               
        }    
      
      function initialise()
      {
          $('.otherSchoolName').hide();
          //load data
          //dtl_std_schoolname
          //dtl_par_schoolname
          loadSchoolNames();
          
          $('#child_input_form').hide();
           studentProfileInitialise();
          
      }
        
      function studentProfileInitialise()
        {
          addState = true;
          editState = false;
          
          $("#small_description").text("");
          $("#admission_description").text("");
          $("#studentForm").show();
          $('#perSchoolDiv').append( $('#school_input_form') );  //adding the school form inside the per school div 
          $('#perSchoolDiv').show();
          $('#school_input_form').show();
          $('#add_school_button').hide();
        }
      function loadSchoolNames()
      {
                 // process the formf
           $.ajax({
                        type: "POST", 
                        url: "../api/search_api/gen_school_names.php", 
                        //data: "",
                        success: function(response)
                        {

                            for(itr in response)
                            {       
                                $('#dtl_std_schoolname').append($('<option>', {
                                        value: response[itr].school_id,
                                        text: response[itr].school_name
                                }));

                                $('#dtl_par_schoolname').append($('<option>', {
                                        value: response[itr].school_id,
                                        text: response[itr].school_name
                                }));

                            }

                            $('#dtl_std_schoolname').append($('<option>', {
                                        value: "-1",
                                        text: "Other"
                                }));

                            $('#dtl_par_schoolname').append($('<option>', {
                                        value: "-1",
                                        text: "Other"
                                }));


                        },
                        dataType: "json"//set to JSON    
                    });    
      }
      function onProfileChange()
      {
          
          console.log("value change");
         if($('#dtl_role').val() == "parent")   
             {
                 console.log("parent");
                    $('#parentForm').show();
                    $('#studentForm').hide();
                    $("#save_button").show();
                    parentProfileInitialise();
                 
             }
          else if($('#dtl_role').val() == "student")
              {
      
                  console.log("student");
                    $('#parentForm').hide();
                    $('#studentForm').show();
                studentProfileInitialise();
                  $("#save_button").hide();
              }
      }
      
      function ifOtherChosen()
      {
           if($('#dtl_role').val() == "parent")  
           {
               if($('#dtl_par_schoolname').val() == "-1")
                {
                   $('.otherSchoolName').show();
                }
               else
                   {
                       $('.otherSchoolName').hide();
                   }
           }
          else if($('#dtl_role').val() == "student")
          {
              if($('#dtl_std_schoolname').val() == "-1")
              {
                   $('.otherSchoolName').show();
              }
              else
              {
                  $('.otherSchoolName').hide();
              }
          }
      }
      
      $('#add_school_button').click(function(){
          
          addState = true;
          editState = false;
          
          $("#small_description").text("");
          $("#admission_description").text("");
          
          $('#perSchoolDiv').append( $('#school_input_form') );  //adding the school form inside the per school div 
          $('#school_input_form').show();
          $('#add_school_button').hide();
      });
      
      $('#cancel_college').click(function(){
          $('#dtl_std_classname').text("");
          $('#small_description').text("");
          $('#admission_description').text("");
          $('#school_input_form').hide();
          $('#add_school_button').show();
      });
        
    
    function saveUserData()
        {
          user_info.name    = $("#dtl_name").val();
          user_info.address = $("#dtl_address").val();
          user_info.contact = $("#dtl_contact").val();
          user_info.email   = $("#dtl_email").val();
          user_info.city    = $("#dtl_city").val();
          user_info.country = $("#country").val();

          if($("#dtl_role").val() == "parent")
          {
              user_info.isParent= true;
          }
          else
          {
              user_info.isParent = false;
          }
        }
        
    //used from parent profile
      function saveCollegeData(divToAdd)
        {
                if(addState == true && editState == false)
                {
                    var school_data_i             = new Object();// important to create new object
                    // school_data_i                = school_data;

                     school_data_i.id             = $("#dtl_std_schoolname").val();
                     school_data_i.name           = $("#dtl_std_schoolname option:selected").text();

                     if(school_data_i.name == "Other")
                     {
                         school_data_i.name   =  $("#dtl_std_otherSchoolName").val();
                         school_data_i.id  =9999;
                     }

                     school_data_i.std            = $("#dtl_std_classname option:selected").val();

                     school_data_i.rate_study     = $('input[name=rating_studies]:checked').val();
                     school_data_i.rate_lab       = $('input[name=rating_labs]:checked').val();
                     school_data_i.rate_lib       = $('input[name=rating_library]:checked').val();
                     school_data_i.rate_sports    = $('input[name=rating_sports]:checked').val();
                     school_data_i.rate_teacher   = $('input[name=rating_admin]:checked').val();

                     school_data_i.period_start   = $("#dtl_start_class").val();
                     school_data_i.period_end     = $("#dtl_end_class").val();
                     
                     school_data_i.brief_intro    = $("#small_description").val();
                     school_data_i.admin_intro    = $("#admission_description").val();

                     console.info(" school data "+school_data_i);
                     school_data_arr.push(school_data_i);


                    var description_sections = document.getElementById(divToAdd);

                    var newElement = document.createElement('div');
                    
                    if(lastChildCommand == "add_child" || (lastChildCommand == "" && presentChildCommand== "add_child") || 
                                                            (lastChildCommand == "" && presentChildCommand == "add_college"))
                        {
                        newElement.innerHTML = "<div class='row'>" + 
                                            "<div class='col-md-2'><h4>"+ $('#dtl_child_name').val()+"</h4></div>"+
                                            "<div class='col-md-4'>" +
                                                "<p><a href='#' onclick='openSchool("+ addedIndex +")  ; return false; '> "+  school_data_i.name  +" </a></p>" +
                                                "<p> Class  "+   $("#dtl_std_classname option:selected").text()  +"</p>"+
                                            "</div>" +
                                            "<div class='col-md-2'>"+
                                                "<a href='#' onclick='editInfo("+ addedIndex +") ; return false;' > edit </a>" +
                                                "<a href='#' onclick='cancelInfo("+ addedIndex +") ; return false;' > cancel </a>"+
                                           "</div>"+
                                           "</div> ";
                    
                        }
                    else
                        {
                        newElement.innerHTML = "<div class='row'>" + 
                                            "<div class='col-md-2'></div>"+
                                            "<div class='col-md-4'>" +
                                                "<p><a href='#' onclick='openSchool("+ addedIndex +")  ; return false; '> "+  school_data_i.name  +" </a></p>" +
                                                "<p> Class  "+   $("#dtl_std_classname option:selected").text()  +"</p>"+
                                            "</div>" +
                                            "<div class='col-md-2'>"+
                                                "<a href='#' onclick='editInfo("+ addedIndex +") ; return false;' > edit </a>" +
                                                "<a href='#' onclick='cancelInfo("+ addedIndex +") ; return false;' > cancel </a>"+
                                           "</div>"+
                                           "</div> ";
                        }

                    newElement.setAttribute('id', 'school_id_'+addedIndex );  //set id
                    description_sections.appendChild(newElement);

                    div_locate[addedIndex] = 'school_id_'+addedIndex;
                    div_map[addedIndex]    = addedIndex;

                    console.log("school added");
                    console.log(school_data_arr);

                    addedIndex ++;
                }
                else if (editState == true && addState == false)
                {
                        console.log("Last Edited Index :"+lastEditedIndex);

                         school_data_arr[lastEditedIndex].id             = $("#dtl_std_schoolname").val();

                         school_data_arr[lastEditedIndex].name           = $("#dtl_std_schoolname option:selected").text();

                         if(school_data_arr[lastEditedIndex].name == "Other")
                         {
                             school_data_arr[lastEditedIndex].name   =  $("#dtl_std_otherSchoolName").val();
                             school_data_arr[lastEditedIndex].id  =9999;
                         }
                         school_data_arr[lastEditedIndex].std            = $("#dtl_std_classname option:selected").val();

                         school_data_arr[lastEditedIndex].rate_study     = $('input[name=rating_studies]:checked').val();
                         school_data_arr[lastEditedIndex].rate_lab       = $('input[name=rating_labs]:checked').val();
                         school_data_arr[lastEditedIndex].rate_lib       = $('input[name=rating_library]:checked').val();
                         school_data_arr[lastEditedIndex].rate_sports    = $('input[name=rating_sports]:checked').val();
                         school_data_arr[lastEditedIndex].rate_teacher   = $('input[name=rating_admin]:checked').val();

                         school_data_arr[lastEditedIndex].period_start   = $("#dtl_start_class").val();
                         school_data_arr[lastEditedIndex].period_end     = $("#dtl_start_class").val();
                         school_data_arr[lastEditedIndex].period_start   = $("#dtl_end_class").val();
                         school_data_arr[lastEditedIndex].brief_intro    = $("#small_description").val();
                         school_data_arr[lastEditedIndex].admin_intro    = $("#admission_description").val();


                        var div = document.getElementById(div_locate[lastEditedIndex]);
                        if (div) {

                            console.log("got the div");
                            div.innerHTML = "<div class='row'>" + 
                                            "<div class='col-md-6'>" +
                                                "<p><a href='#' onclick='openSchool("+  lastEditedIndex     +")  ; return false; '> "+   school_data_arr[lastEditedIndex].name   +" </a></p>" +
                                                "<p> Class  "+    school_data_arr[lastEditedIndex].std   +"</p>"+
                                            "</div>" +
                                            "<div class='col-md-2'>"+
                                                "<a href='#' onclick='editInfo("+ lastEditedIndex +") ; return false;' > edit </a>" +
                                                "<a href='#' onclick='cancelInfo("+  lastEditedIndex +") ; return false;' > cancel </a>"+
                                           "</div>"+
                                           "</div> ";


                        }

                      console.log("school edited");
                    editState = false;

                }
                
          /*       $('#small_description').val("");
                  $('#admission_description').val("");
                  $('#school_input_form').hide();
                  $('#add_school_button').show(); */
                 
        }
      
        
        
      $('#save_college').click(function(){
          saveUserData();
          saveCollegeData_school("added_school");
          $('#small_description').val("");
          $('#admission_description').val("");
          $('#school_input_form').hide();
          $('#add_school_button').show(); 
          $("#save_button").show();
          
      });
        
        function saveCollegeData_school(divToAdd) //intacting old code 
        {
                  if(addState == true && editState == false)
                {
                    var school_data_i             = new Object();// important to create new object
                    // school_data_i                = school_data;

                     school_data_i.id             = $("#dtl_std_schoolname").val();
                     school_data_i.name           = $("#dtl_std_schoolname option:selected").text();

                     if(school_data_i.name == "Other")
                     {
                         school_data_i.name   =  $("#dtl_std_otherSchoolName").val();
                         school_data_i.id  =9999;
                     }

                     school_data_i.std            = $("#dtl_std_classname option:selected").val();

                     school_data_i.rate_study     = $('input[name=rating_studies]:checked').val();
                     school_data_i.rate_lab       = $('input[name=rating_labs]:checked').val();
                     school_data_i.rate_lib       = $('input[name=rating_library]:checked').val();
                     school_data_i.rate_sports    = $('input[name=rating_sports]:checked').val();
                     school_data_i.rate_teacher   = $('input[name=rating_admin]:checked').val();

                     school_data_i.period_start   = $("#dtl_start_class").val();
                     school_data_i.period_end     = $("#dtl_start_class").val();
                     school_data_i.period_start   = $("#dtl_end_class").val();
                     school_data_i.brief_intro    = $("#small_description").val();
                     school_data_i.admin_intro    = $("#admission_description").val();

                     console.info(" school data "+school_data_i);
                     school_data_arr.push(school_data_i);


                    var description_sections = document.getElementById(divToAdd);

                    var newElement = document.createElement('div');

                        newElement.innerHTML = "<div class='row'>" + 
                                            "<div class='col-md-6'>" +
                                                "<p><a href='#' onclick='openSchool("+ addedIndex +")  ; return false; '> "+  school_data_i.name  +" </a></p>" +
                                                "<p> Class  "+   $("#dtl_std_classname option:selected").text()  +"</p>"+
                                            "</div>" +
                                            "<div class='col-md-2'>"+
                                                "<a href='#' onclick='editInfo("+ addedIndex +") ; return false;' > edit </a>" +
                                                "<a href='#' onclick='cancelInfo("+ addedIndex +") ; return false;' > cancel </a>"+
                                           "</div>"+
                                           "</div> ";
                        

                    newElement.setAttribute('id', 'school_id_'+addedIndex );  //set id
                    description_sections.appendChild(newElement);

                    div_locate[addedIndex] = 'school_id_'+addedIndex;
                    div_map[addedIndex]    = addedIndex;

                    console.log("school added");
                    console.log(school_data_arr);

                    addedIndex ++;
                }
                else if (editState == true && addState == false)
                {
                        console.log("Last Edited Index :"+lastEditedIndex);

                         school_data_arr[lastEditedIndex].id             = $("#dtl_std_schoolname").val();

                         school_data_arr[lastEditedIndex].name           = $("#dtl_std_schoolname option:selected").text();

                         if(school_data_arr[lastEditedIndex].name == "Other")
                         {
                             school_data_arr[lastEditedIndex].name   =  $("#dtl_std_otherSchoolName").val();
                             school_data_arr[lastEditedIndex].id  =9999;
                         }
                         school_data_arr[lastEditedIndex].std            = $("#dtl_std_classname option:selected").val();

                         school_data_arr[lastEditedIndex].rate_study     = $('input[name=rating_studies]:checked').val();
                         school_data_arr[lastEditedIndex].rate_lab       = $('input[name=rating_labs]:checked').val();
                         school_data_arr[lastEditedIndex].rate_lib       = $('input[name=rating_library]:checked').val();
                         school_data_arr[lastEditedIndex].rate_sports    = $('input[name=rating_sports]:checked').val();
                         school_data_arr[lastEditedIndex].rate_teacher   = $('input[name=rating_admin]:checked').val();

                         school_data_arr[lastEditedIndex].period_start   = $("#dtl_start_class").val();
                         school_data_arr[lastEditedIndex].period_end     = $("#dtl_start_class").val();
                         school_data_arr[lastEditedIndex].period_start   = $("#dtl_end_class").val();
                         school_data_arr[lastEditedIndex].brief_intro    = $("#small_description").val();
                         school_data_arr[lastEditedIndex].admin_intro    = $("#admission_description").val();


                        var div = document.getElementById(div_locate[lastEditedIndex]);
                        if (div) {

                            console.log("got the div");
                            div.innerHTML = "<div class='row'>" + 
                                            "<div class='col-md-6'>" +
                                                "<p><a href='#' onclick='openSchool("+  lastEditedIndex     +")  ; return false; '> "+   school_data_arr[lastEditedIndex].name   +" </a></p>" +
                                                "<p> Class  "+    school_data_arr[lastEditedIndex].std   +"</p>"+
                                            "</div>" +
                                            "<div class='col-md-2'>"+
                                                "<a href='#' onclick='editInfo("+ lastEditedIndex +") ; return false;' > edit </a>" +
                                                "<a href='#' onclick='cancelInfo("+  lastEditedIndex +") ; return false;' > cancel </a>"+
                                           "</div>"+
                                           "</div> ";


                        }

                      console.log("school edited");
                    editState = false;

                }
        }
    
        function openSchool(school_id)
        {
            console.log(school_id);
        }
        
        function editInfo(school_id)
        {
            editState = true;
            addState = false;
            
            console.log(school_id);  
            indx = div_map[school_id];
            lastEditedIndex = indx;
            console.log("Last Edited Index :"+lastEditedIndex);
            console.log(school_data_arr[indx]);
            
            if(school_data_arr[indx].id == "9999")
            {
                $("#dtl_std_schoolname").val("-1");
            }
            else 
            {
                $("#dtl_std_schoolname").val(school_data_arr[indx].id);
            }

            $("#dtl_std_classname").val( school_data_arr[indx].std );
            $('input:radio[name="rating_studies"]').filter('[value='+ school_data_arr[indx].rate_study+']').attr('checked', true);
            $('input:radio[name="rating_labs"]').filter('[value='+ school_data_arr[indx].rate_lab+']').attr('checked', true);
            $('input:radio[name="rating_library"]').filter('[value='+ school_data_arr[indx].rate_lib+']').attr('checked', true);
            $('input:radio[name="rating_sports"]').filter('[value='+ school_data_arr[indx].rate_sports+']').attr('checked', true);
            $('input:radio[name="rating_admin"]').filter('[value='+ school_data_arr[indx].rate_teacher+']').attr('checked', true);

            $("#dtl_start_class").val(school_data_arr[indx].period_start );
            $("#dtl_start_class").val(   school_data_arr[indx].period_end   );
            $("#dtl_end_class").val(  school_data_arr[indx].period_start );
            $("#small_description").val(  school_data_arr[indx].brief_intro );
            $("#admission_description").val( school_data_arr[indx].admin_intro );

            $('#school_input_form').show();
            $('#add_school_button').hide();
            
        }
        
        function cancelInfo(school_id)
        {
            console.log("deletion at:"+school_id);
            
            var div = document.getElementById(div_locate[school_id]);
            if (div)
            {
                div.parentNode.removeChild(div);
            }
            
            school_data_arr.splice(div_map[school_id],1);
            
            delete div_locate[school_id];
            
            for(i in div_map)
                {
                    if(i <= school_id)
                        continue;
                    
                    div_map[i] = div_map[i] -1;
                }
            
            delete div_map[school_id];
            
            addedIndex --;
        }
        
        function parentProfileInitialise()
        {
            
              $('#child_form').show();
              $('#child_form').append( $('#child_input_form') );  //adding the school form inside the per school div 
          
              $('#child_input_form').show();
              

              //clear child name and age
              $("#dtl_child_name").val("");
              $("#dtl_child_age").val("");
            
              addState = true;
              editState = false;
          
             $("#small_description").text("");
             $("#admission_description").text("");
          
             $('#perChildDiv').append( $('#school_input_form'));  //adding the school form inside the per school div 
             $("#perChildDiv").show();
             $('#school_input_form').show();
             $('#save_college').hide();
             $('#cancel_college').hide();
             $('#add_child').show();
            
             $('#add_college_for_child').show();
            
          //   $('#save_child').show();
             
             school_data_arr.splice(0,school_data_arr.length);
             addedIndex = 0;
        }
        
        $("#add_child").click(function(){
               
            presentChildCommand = "add_child";
            save_child_data();
            //parentProfileInitialise();
        });
        
         $('#add_college_for_child').click(function (){
            
             presentChildCommand = "add_college";
               save_child_data();
          
        });
        
        function  save_child_data()
        {
            
            saveUserData();
            
            $("#save_button").show();
            //no past command and present command is add child 
            if(lastChildCommand == "" && presentChildCommand == "add_child")
                {
                    console.log("first add child");
                      saveCollegeData("added_child_school"); //save the schools 
                      saveChild();                           //save the child data
                    //total form should get clean
                
                    resetChild();resetCollege();
                    
                    lastChildCommand ="add_child";
                    
                }
            else if(lastChildCommand == "" && presentChildCommand == "add_college")
                {
                    console.log("first add colege");
                    //child name is not yet saved
                    saveCollegeData("added_child_school"); //save the schools 
                      saveChild();                           //save the child data
                    
                    //hide child form 
                    $("#child_form").hide();
                    resetCollege();
                    lastChildCommand ="add_college";
                    
                }
            else if(lastChildCommand == "add_college" && presentChildCommand =="add_child")
                {
                    
                    console.log("add college ---> add child");
                    //clen the school array
                    if(school_data_arr.length > 0)
                        school_data_arr.splice(0,school_data_arr.length);
                    
                    //only both forms should come up
                    $("#child_form").show();
                    $("#perChildDiv").show();
                    $("#school_input_form").show();
                    resetChild();
                    resetCollege();
                    lastChildCommand ="add_child";
                    
                }
            else if (lastChildCommand =="add_college" && presentChildCommand =="add_college")
                {
                    console.log("add college ---> add college");
                       saveCollegeData("added_child_school"); //save the schools 
                    
                      for(school_data_i in school_data_arr)
                    {
                        var school_d= new Object();

                        school_d.id             = school_data_arr[school_data_i].id;
                        school_d.name           = school_data_arr[school_data_i].name;
                        school_d.std            = school_data_arr[school_data_i].std;
                        school_d.rate_study     = school_data_arr[school_data_i].rate_study;
                        school_d.rate_lab       = school_data_arr[school_data_i].rate_lab;
                        school_d.rate_sports    = school_data_arr[school_data_i].rate_sports;
                        school_d.rate_lib       = school_data_arr[school_data_i].rate_lib;
                        school_d.rate_teacher   = school_data_arr[school_data_i].rate_teacher;
                        school_d.period_start   = school_data_arr[school_data_i].period_start;
                        school_d.period_end     = school_data_arr[school_data_i].period_end;
                        school_d.brief_intro    = school_data_arr[school_data_i].brief_intro;
                        school_d.admin_intro    = school_data_arr[school_data_i].admin_intro;
                        child_data_arr[childIndex-1].school_data_arr.push(school_d);
                    }
                    
                    
                    school_data_arr.splice(0,school_data_arr.length);
                    resetCollege();
                    lastChildCommand ="add_college";
                }
            else if(lastChildCommand =="add_child" && presentChildCommand =="add_child")
                {
                            console.log("add child ---> add child");
                    //clen the school array
                    if(school_data_arr.length > 0)
                        school_data_arr.splice(0,school_data_arr.length);
                    saveCollegeData("added_child_school"); //save the schools 
                      saveChild();                           //save the child data
                    resetChild();resetCollege();
                    lastChildCommand ="add_child";
                    
                }
            else if(lastChildCommand == "add_child" && presentChildCommand =="add_college")
                {  
                     saveCollegeData("added_child_school"); //save the schools 
                    
                      for(school_data_i in school_data_arr)
                    {
                        var school_d= new Object();
                        school_d.id             = school_data_arr[school_data_i].id;
                        school_d.name           = school_data_arr[school_data_i].name;
                        school_d.std            = school_data_arr[school_data_i].std;
                        school_d.rate_study     = school_data_arr[school_data_i].rate_study;
                        school_d.rate_lab       = school_data_arr[school_data_i].rate_lab;
                        school_d.rate_sports    = school_data_arr[school_data_i].rate_sports;
                        school_d.rate_lib       = school_data_arr[school_data_i].rate_lib;
                        school_d.rate_teacher   = school_data_arr[school_data_i].rate_teacher;
                        school_d.period_start   = school_data_arr[school_data_i].period_start;
                        school_d.period_end     = school_data_arr[school_data_i].period_end;
                        school_d.brief_intro    = school_data_arr[school_data_i].brief_intro;
                        school_d.admin_intro    = school_data_arr[school_data_i].admin_intro;
                        child_data_arr[childIndex-1].school_data_arr.push(school_d);
                    }
                    school_data_arr.splice(0,school_data_arr.length);
                    $("#child_form").hide();
                    resetCollege();
                    lastChildCommand ="add_college";
                }
            
        }
        
        function resetChild()
        {
                $("#dtl_child_name").val("");
                $("#dtl_child_age").val("");
        }
        
        function resetCollege()
        {
            $("#dtl_std_schoolname").val($("#dtl_std_schoolname option:first").val()); //first option;
            $("#dtl_std_classname").val($("#dtl_std_classname option:first").val()); //first option;
            $("#dtl_start_class").val($("#dtl_start_class option:first").val()); //first option;
            $("#dtl_end_class").val($("#dtl_end_class option:first").val()); //first option;
            $("#dtl_end_class").val($("#dtl_end_class option:first").val()); //first option;
            $("#small_description").val("");
            $("#admission_description").val("");
            
        }
        
        
        function cancelChild()
        {
            $('#studentForm').hide();
            $('#child_input_form').hide();
            $("#perChildDiv").hide();
            $("#dtl_child_name").val("");
            $("#dtl_child_age").val("");
            $("#add_child").show();
            school_data_arr.splice(0,school_data_arr.length);
        }
        
    
        function saveChild()
        {
             //saving the data
            var child_data = new Object();
            child_data.name = $("#dtl_child_name").val();
            
            child_data.id   = childIndex;
            
            child_data.age  = $("#dtl_child_age").val();
            
            child_data.school_data_arr = [];
            
            for(school_data_i in school_data_arr)
            {
                var school_d= new Object();

                school_d.id             = school_data_arr[school_data_i].id;
                school_d.name           = school_data_arr[school_data_i].name;
                school_d.std            = school_data_arr[school_data_i].std;
                school_d.rate_study     = school_data_arr[school_data_i].rate_study;
                school_d.rate_lab       = school_data_arr[school_data_i].rate_lab;
                school_d.rate_sports    = school_data_arr[school_data_i].rate_sports;
                school_d.rate_lib       = school_data_arr[school_data_i].rate_lib;
                school_d.rate_teacher   = school_data_arr[school_data_i].rate_teacher;
                school_d.period_start   = school_data_arr[school_data_i].period_start;
                school_d.period_end     = school_data_arr[school_data_i].period_end;
                school_d.brief_intro    = school_data_arr[school_data_i].brief_intro;
                school_d.admin_intro    = school_data_arr[school_data_i].admin_intro;
                child_data.school_data_arr.push(school_d);
            }
            
            child_map[child_data.id] = childIndex
            
            child_data_arr.push(child_data)
    
            isChildDataSaved = true;
            childIndex++;
            
            school_data_arr.splice(0,school_data_arr.length);
        }
        
        function editChild(child_id)
        {
            $("#perChildDiv").show();
            childIndex  = child_map[child_id];
            
            $("#dtl_child_name").val(child_data_arr[childIndex].name);
            $("#dtl_child_age").val(child_data_arr[childIndex].age);
            
            console.log("Getting ID to clean "+childDivLocate[child_data_arr[childIndex].id]);
            var childDiv = document.getElementById(childDivLocate[child_data_arr[childIndex].id]);
            
            var schoolElement = document.createElement('div');
            
            child_data_var = child_data_arr[childIndex];
            
            for(itr in  child_data_var.school_data_arr)
            {
                    var child_school_index = child_data_var.id +" "+child_data_var.school_data_arr[itr].id;
                    div_locate[child_school_index] = 'school_id_'+child_school_index;
                
                    var perSchoolDiv = document.createElement('div');
                     perSchoolDiv.innerHTML = "<div class='row'>" + 
                                    "<div class='col-md-2'></div>"+
                                    "<div class='col-md-4'>" +
                                        "<p><a href='#' onclick='openSchool("+ child_data_var.school_data_arr[itr].id +")  ; return false; '> "+  child_data_var.school_data_arr[itr].name  +" </a></p>" +
                                        "<p> Class  "+   child_data_var.school_data_arr[itr].std  +"</p>"+
                                    "</div>" +
                                    "<div class='col-md-2'>"+
                                        "<a href='#' onclick='editPerChildSchoolInfo("+ child_school_index +") ; return false;' > edit </a>" +
                                        "<a href='#' onclick='cancelPerChildSchoolInfo("+ child_school_index +") ; return false;' > cancel </a>"+
                                   "</div>"+
                                   "</div> ";
                    perSchoolDiv.setAttribute('id',  div_locate[child_school_index] );  //set id
                    schoolElement.appendChild(perSchoolDiv);
            }
            
            schoolElement.setAttribute('id', 'child_school_data_'+child_data_var.id );  //set id
            
            if (childDiv)
            {
                childDiv.innerHTML("");
            }
            
            
            childDiv.appendChild(schoolElement);
            
        }
          
    </script>
  

</body></html>
